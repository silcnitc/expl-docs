<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Compiler Lab website for NIT Calicut"><link href=https://silcnitc.github.io/expl-docs/yacc/ rel=canonical><link href=../lex/ rel=prev><link href=../ywl/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.31"><title>YACC - EXPL NIT-C</title><link rel=stylesheet href=../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=purple data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#using-yacc class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <b>Site is undergoing migration.</b> Old URL: <a href=https://silcnitc.github.io target=_blank target=_blank rel="nofollow noopener">https://silcnitc.github.io</a> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="EXPL NIT-C" class="md-header__button md-logo" aria-label="EXPL NIT-C" data-md-component=logo> <img src=../img/nitc-logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> EXPL NIT-C </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> YACC </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=purple data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=purple data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../about/philosophy/ class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=../roadmap/ class=md-tabs__link> Roadmap </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../documentation/ class=md-tabs__link> Documentation </a> </li> <li class=md-tabs__item> <a href=../feedback/ class=md-tabs__link> Student Feedback </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="EXPL NIT-C" class="md-nav__button md-logo" aria-label="EXPL NIT-C" data-md-component=logo> <img src=../img/nitc-logo.png alt=logo> </a> EXPL NIT-C </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> About </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../about/philosophy/ class=md-nav__link> <span class=md-ellipsis> Philosophy </span> </a> </li> <li class=md-nav__item> <a href=../about/authors/ class=md-nav__link> <span class=md-ellipsis> Authors </span> </a> </li> <li class=md-nav__item> <a href=../about/license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Roadmap </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Roadmap </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../roadmap/ class=md-nav__link> <span class=md-ellipsis> Roadmap </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-00/ class=md-nav__link> <span class=md-ellipsis> Stage 0 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-01/ class=md-nav__link> <span class=md-ellipsis> Stage 1 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-02/ class=md-nav__link> <span class=md-ellipsis> Stage 2 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-03/ class=md-nav__link> <span class=md-ellipsis> Stage 3 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-04/ class=md-nav__link> <span class=md-ellipsis> Stage 4 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-05/ class=md-nav__link> <span class=md-ellipsis> Stage 5 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-06/ class=md-nav__link> <span class=md-ellipsis> Stage 6 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-07/ class=md-nav__link> <span class=md-ellipsis> Stage 7 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-08/ class=md-nav__link> <span class=md-ellipsis> Stage 8 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Documentation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../documentation/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class=md-nav__item> <a href=../codegen/ class=md-nav__link> <span class=md-ellipsis> Code Generation </span> </a> </li> <li class=md-nav__item> <a href=../abi/ class=md-nav__link> <span class=md-ellipsis> Application Binary Interface </span> </a> </li> <li class=md-nav__item> <a href=../libinterface/ class=md-nav__link> <span class=md-ellipsis> Library Implementation </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex> <span class=md-ellipsis> ExPL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> ExPL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../expl/ class=md-nav__link> <span class=md-ellipsis> ExpL Specification </span> </a> </li> <li class=md-nav__item> <a href=../grammar-outline/ class=md-nav__link> <span class=md-ellipsis> ExpL Grammar Outline </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_3> <label class=md-nav__link for=__nav_4_5_3 id=__nav_4_5_3_label tabindex=0> <span class=md-ellipsis> Compile Time Data Structures for ExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_3> <span class="md-nav__icon md-icon"></span> Compile Time Data Structures for ExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../data-structures/ class=md-nav__link> <span class=md-ellipsis> Compile Time Data Structures for ExpL </span> </a> </li> <li class=md-nav__item> <a href=../data_structures/abstract-syntax-tree/ class=md-nav__link> <span class=md-ellipsis> Abstract Syntax Tree </span> </a> </li> <li class=md-nav__item> <a href=../data_structures/type-table/ class=md-nav__link> <span class=md-ellipsis> Type Table </span> </a> </li> <li class=md-nav__item> <a href=../data_structures/global-symbol-table/ class=md-nav__link> <span class=md-ellipsis> Global Symbol Table </span> </a> </li> <li class=md-nav__item> <a href=../data_structures/local-symbol-table/ class=md-nav__link> <span class=md-ellipsis> Local Symbol Table </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_4> <label class=md-nav__link for=__nav_4_5_4 id=__nav_4_5_4_label tabindex=0> <span class=md-ellipsis> Run Time Data Structures for ExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_4> <span class="md-nav__icon md-icon"></span> Run Time Data Structures for ExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../run-data-structures/ class=md-nav__link> <span class=md-ellipsis> Run Time Data Structures for ExpL </span> </a> </li> <li class=md-nav__item> <a href=../run_data_structures/heap/ class=md-nav__link> <span class=md-ellipsis> Heap Allocation </span> </a> </li> <li class=md-nav__item> <a href=../run_data_structures/register/ class=md-nav__link> <span class=md-ellipsis> Register Allocation </span> </a> </li> <li class=md-nav__item> <a href=../run_data_structures/run-time-stack/ class=md-nav__link> <span class=md-ellipsis> Stack Allocation </span> </a> </li> <li class=md-nav__item> <a href=../run_data_structures/static-allocation/ class=md-nav__link> <span class=md-ellipsis> Static Allocation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_5> <label class=md-nav__link for=__nav_4_5_5 id=__nav_4_5_5_label tabindex=0> <span class=md-ellipsis> ExPL Test Programs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_5> <span class="md-nav__icon md-icon"></span> ExPL Test Programs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../testprograms/ class=md-nav__link> <span class=md-ellipsis> Test Programs </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-01/ class=md-nav__link> <span class=md-ellipsis> Program 1 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-02/ class=md-nav__link> <span class=md-ellipsis> Program 2 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-03/ class=md-nav__link> <span class=md-ellipsis> Program 3 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-04/ class=md-nav__link> <span class=md-ellipsis> Program 4 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-05/ class=md-nav__link> <span class=md-ellipsis> Program 5 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-06/ class=md-nav__link> <span class=md-ellipsis> Program 6 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-07/ class=md-nav__link> <span class=md-ellipsis> Program 7 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-08/ class=md-nav__link> <span class=md-ellipsis> Program 8 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-09/ class=md-nav__link> <span class=md-ellipsis> Program 9 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-10/ class=md-nav__link> <span class=md-ellipsis> Program 10 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-11/ class=md-nav__link> <span class=md-ellipsis> Program 11 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-12/ class=md-nav__link> <span class=md-ellipsis> Program 12 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_5_14> <label class=md-nav__link for=__nav_4_5_5_14 id=__nav_4_5_5_14_label tabindex=0> <span class=md-ellipsis> Stage 4 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_5_5_14_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_5_14> <span class="md-nav__icon md-icon"></span> Stage 4 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../testprograms/stage4/bubblesort/ class=md-nav__link> <span class=md-ellipsis> Bubble Sort </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/stage4/fibaofn/ class=md-nav__link> <span class=md-ellipsis> Fibonacci </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/stage4/prime/ class=md-nav__link> <span class=md-ellipsis> Prime </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/stage4/sum-to-n-fact/ class=md-nav__link> <span class=md-ellipsis> Sum to n! </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6 id=__nav_4_6_label tabindex> <span class=md-ellipsis> OExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> OExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../oexpl-specification/ class=md-nav__link> <span class=md-ellipsis> OExpL Specification </span> </a> </li> <li class=md-nav__item> <a href=../oexpl-grammar-outline/ class=md-nav__link> <span class=md-ellipsis> OExpL Grammar Outline </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6_3> <label class=md-nav__link for=__nav_4_6_3 id=__nav_4_6_3_label tabindex=0> <span class=md-ellipsis> Compile Time Data Structures for OExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6_3> <span class="md-nav__icon md-icon"></span> Compile Time Data Structures for OExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../oexpl-data-structures/ class=md-nav__link> <span class=md-ellipsis> Compile Time Data Structures for OExpL </span> </a> </li> <li class=md-nav__item> <a href=../oexpl_data_structures/class-table/ class=md-nav__link> <span class=md-ellipsis> Class Table </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6_4> <label class=md-nav__link for=__nav_4_6_4 id=__nav_4_6_4_label tabindex=0> <span class=md-ellipsis> Run Time Data Structures for OExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6_4> <span class="md-nav__icon md-icon"></span> Run Time Data Structures for OExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../oexpl-run-data-structures/ class=md-nav__link> <span class=md-ellipsis> Run Time Data Structures for OExpL </span> </a> </li> <li class=md-nav__item> <a href=../oexpl_runtime_data_structures/virtual_function_table/ class=md-nav__link> <span class=md-ellipsis> Virtual Function Table </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../oexpl-runtime-binding-tutorial/ class=md-nav__link> <span class=md-ellipsis> OExPL Runtime Binding </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6_6> <label class=md-nav__link for=__nav_4_6_6 id=__nav_4_6_6_label tabindex=0> <span class=md-ellipsis> OExPL Test Programs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_6_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6_6> <span class="md-nav__icon md-icon"></span> OExPL Test Programs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../oexpl-testprograms/ class=md-nav__link> <span class=md-ellipsis> OExPL Test Programs </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test1/ class=md-nav__link> <span class=md-ellipsis> Program 1 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test2/ class=md-nav__link> <span class=md-ellipsis> Program 2 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test3/ class=md-nav__link> <span class=md-ellipsis> Program 3 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test4/ class=md-nav__link> <span class=md-ellipsis> Program 4 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test5/ class=md-nav__link> <span class=md-ellipsis> Program 5 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test6/ class=md-nav__link> <span class=md-ellipsis> Program 6 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test7/ class=md-nav__link> <span class=md-ellipsis> Program 7 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_7 checked> <label class=md-nav__link for=__nav_4_7 id=__nav_4_7_label tabindex> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_7_label aria-expanded=true> <label class=md-nav__title for=__nav_4_7> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../lex/ class=md-nav__link> <span class=md-ellipsis> Using LEX </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Using YACC </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Using YACC </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction-to-yacc class=md-nav__link> <span class=md-ellipsis> Introduction to YACC </span> </a> <nav class=md-nav aria-label="Introduction to YACC"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#parser class=md-nav__link> <span class=md-ellipsis> Parser </span> </a> </li> <li class=md-nav__item> <a href=#context-free-grammar-cfg class=md-nav__link> <span class=md-ellipsis> Context Free Grammar (CFG) </span> </a> </li> <li class=md-nav__item> <a href=#yyparse class=md-nav__link> <span class=md-ellipsis> yyparse() </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-structure-of-yacc-programs class=md-nav__link> <span class=md-ellipsis> The structure of YACC programs </span> </a> <nav class=md-nav aria-label="The structure of YACC programs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#declarations class=md-nav__link> <span class=md-ellipsis> Declarations </span> </a> </li> <li class=md-nav__item> <a href=#rules class=md-nav__link> <span class=md-ellipsis> Rules </span> </a> <nav class=md-nav aria-label=Rules> <ul class=md-nav__list> <li class=md-nav__item> <a href=#productions class=md-nav__link> <span class=md-ellipsis> Productions </span> </a> </li> <li class=md-nav__item> <a href=#actions class=md-nav__link> <span class=md-ellipsis> Actions </span> </a> </li> <li class=md-nav__item> <a href=#auxiliary-functions class=md-nav__link> <span class=md-ellipsis> Auxiliary Functions </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#a-working-introduction-to-shift-reduce-parsing class=md-nav__link> <span class=md-ellipsis> A working introduction to shift-reduce parsing </span> </a> <nav class=md-nav aria-label="A working introduction to shift-reduce parsing"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-parsers-iteration-steps class=md-nav__link> <span class=md-ellipsis> The parser's Iteration Steps </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#infix-to-postfix-program class=md-nav__link> <span class=md-ellipsis> Infix to Postfix program </span> </a> </li> <li class=md-nav__item> <a href=#conflicts-in-parsing-using-yacc class=md-nav__link> <span class=md-ellipsis> Conflicts in Parsing using YACC </span> </a> <nav class=md-nav aria-label="Conflicts in Parsing using YACC"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#resolving-shiftreduce-conflicts class=md-nav__link> <span class=md-ellipsis> Resolving shift/reduce conflicts </span> </a> </li> <li class=md-nav__item> <a href=#reducereduce-conflicts class=md-nav__link> <span class=md-ellipsis> reduce/reduce conflicts </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#passing-values-from-the-yylex-to-yyparse class=md-nav__link> <span class=md-ellipsis> Passing values from the yylex() to yyparse() </span> </a> </li> <li class=md-nav__item> <a href=#exercises class=md-nav__link> <span class=md-ellipsis> Exercises </span> </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> <span class=md-ellipsis> References </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../ywl/ class=md-nav__link> <span class=md-ellipsis> Using YACC with LEX </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_7_4> <label class=md-nav__link for=__nav_4_7_4 id=__nav_4_7_4_label tabindex=0> <span class=md-ellipsis> GDB </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_7_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_7_4> <span class="md-nav__icon md-icon"></span> GDB </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../gdb/ class=md-nav__link> <span class=md-ellipsis> Using GDB </span> </a> </li> <li class=md-nav__item> <a href=../gdb-files/ class=md-nav__link> <span class=md-ellipsis> GDB Input Files </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../label-translation/ class=md-nav__link> <span class=md-ellipsis> Label Translation </span> </a> </li> <li class=md-nav__item> <a href=../install/ class=md-nav__link> <span class=md-ellipsis> XSM Simulator Installation </span> </a> </li> <li class=md-nav__item> <a href=../xsmusagespec/ class=md-nav__link> <span class=md-ellipsis> XSM Simulator Instructions </span> </a> </li> <li class=md-nav__item> <a href=../xsm-environment-tut/ class=md-nav__link> <span class=md-ellipsis> XSM Environment Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../library-implementation/ class=md-nav__link> <span class=md-ellipsis> Library Implementation </span> </a> </li> <li class=md-nav__item> <a href=../attribute/ class=md-nav__link> <span class=md-ellipsis> Attribute Synthesis </span> </a> </li> <li class=md-nav__item> <a href=../Data_Structures/ class=md-nav__link> <span class=md-ellipsis> Data Structures for ExpL Compilation/Interpretation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_8> <label class=md-nav__link for=__nav_4_8 id=__nav_4_8_label tabindex> <span class=md-ellipsis> Misc </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_8_label aria-expanded=false> <label class=md-nav__title for=__nav_4_8> <span class="md-nav__icon md-icon"></span> Misc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ex1/ class=md-nav__link> <span class=md-ellipsis> Exercise 1 </span> </a> </li> <li class=md-nav__item> <a href=../explusagespec/ class=md-nav__link> <span class=md-ellipsis> ExPL Usage spec? </span> </a> </li> <li class=md-nav__item> <a href=../libinterfaceexpl/ class=md-nav__link> <span class=md-ellipsis> ExPL Library Interface? </span> </a> </li> <li class=md-nav__item> <a href=../help/ class=md-nav__link> <span class=md-ellipsis> help </span> </a> </li> <li class=md-nav__item> <a href=../oexpl/ class=md-nav__link> <span class=md-ellipsis> OExPL </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Student Feedback </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Student Feedback </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../feedback/ class=md-nav__link> <span class=md-ellipsis> Student Feedback </span> </a> </li> <li class=md-nav__item> <a href=../feedback/nitc-winter-2021/ class=md-nav__link> <span class=md-ellipsis> NIT-C Winter 2021 </span> </a> </li> <li class=md-nav__item> <a href=../feedback/nitc-winter-2017/ class=md-nav__link> <span class=md-ellipsis> NIT-C Winter 2017 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction-to-yacc class=md-nav__link> <span class=md-ellipsis> Introduction to YACC </span> </a> <nav class=md-nav aria-label="Introduction to YACC"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#parser class=md-nav__link> <span class=md-ellipsis> Parser </span> </a> </li> <li class=md-nav__item> <a href=#context-free-grammar-cfg class=md-nav__link> <span class=md-ellipsis> Context Free Grammar (CFG) </span> </a> </li> <li class=md-nav__item> <a href=#yyparse class=md-nav__link> <span class=md-ellipsis> yyparse() </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-structure-of-yacc-programs class=md-nav__link> <span class=md-ellipsis> The structure of YACC programs </span> </a> <nav class=md-nav aria-label="The structure of YACC programs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#declarations class=md-nav__link> <span class=md-ellipsis> Declarations </span> </a> </li> <li class=md-nav__item> <a href=#rules class=md-nav__link> <span class=md-ellipsis> Rules </span> </a> <nav class=md-nav aria-label=Rules> <ul class=md-nav__list> <li class=md-nav__item> <a href=#productions class=md-nav__link> <span class=md-ellipsis> Productions </span> </a> </li> <li class=md-nav__item> <a href=#actions class=md-nav__link> <span class=md-ellipsis> Actions </span> </a> </li> <li class=md-nav__item> <a href=#auxiliary-functions class=md-nav__link> <span class=md-ellipsis> Auxiliary Functions </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#a-working-introduction-to-shift-reduce-parsing class=md-nav__link> <span class=md-ellipsis> A working introduction to shift-reduce parsing </span> </a> <nav class=md-nav aria-label="A working introduction to shift-reduce parsing"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-parsers-iteration-steps class=md-nav__link> <span class=md-ellipsis> The parser's Iteration Steps </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#infix-to-postfix-program class=md-nav__link> <span class=md-ellipsis> Infix to Postfix program </span> </a> </li> <li class=md-nav__item> <a href=#conflicts-in-parsing-using-yacc class=md-nav__link> <span class=md-ellipsis> Conflicts in Parsing using YACC </span> </a> <nav class=md-nav aria-label="Conflicts in Parsing using YACC"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#resolving-shiftreduce-conflicts class=md-nav__link> <span class=md-ellipsis> Resolving shift/reduce conflicts </span> </a> </li> <li class=md-nav__item> <a href=#reducereduce-conflicts class=md-nav__link> <span class=md-ellipsis> reduce/reduce conflicts </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#passing-values-from-the-yylex-to-yyparse class=md-nav__link> <span class=md-ellipsis> Passing values from the yylex() to yyparse() </span> </a> </li> <li class=md-nav__item> <a href=#exercises class=md-nav__link> <span class=md-ellipsis> Exercises </span> </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> <span class=md-ellipsis> References </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=using-yacc>Using YACC<a class=headerlink href=#using-yacc title="Permanent link">&para;</a></h1> <h2 id=introduction-to-yacc>Introduction to YACC<a class=headerlink href=#introduction-to-yacc title="Permanent link">&para;</a></h2> <p>YACC (Yet Another Compiler Compiler) is a tool used to generate a parser. This document is a tutorial for the use of YACC to generate a parser for ExpL. YACC translates a given <a href=#context-free-grammar-cfg>Context Free Grammar (CFG)</a> specifications (input in input_file.y) into a C implementation (y.tab.c) of a corresponding <a href=http://en.wikipedia.org/wiki/Pushdown_automaton>push down automaton</a> (i.e., a finite state machine with a stack). This C program when compiled, yields an executable parser.</p> <p><img alt src=../img/yacc_1.png></p> <p>The source SIL program is fed as the input to the generated parser ( a.out ). The <em>parser</em> checks whether the program satisfies the syntax specification given in the input_file.y file.</p> <p><a href=https://en.wikipedia.org/wiki/Yacc>YACC</a> was developed by <a href=https://en.wikipedia.org/wiki/Stephen_C._Johnson>Stephen C. Johnson</a> at <a href=https://en.wikipedia.org/wiki/Bell_Labs>Bell labs</a>.</p> <h3 id=parser>Parser<a class=headerlink href=#parser title="Permanent link">&para;</a></h3> <p>A parser is a program that checks whether its input (viewed as a stream of tokens) meets a given grammar specification. The syntax of SIL can be specified using a Context Free Grammar. As mentioned earlier, YACC takes this specification and generates a parser for SIL.</p> <h3 id=context-free-grammar-cfg>Context Free Grammar (CFG)<a class=headerlink href=#context-free-grammar-cfg title="Permanent link">&para;</a></h3> <p>A context free grammar is defined by a four tuple (N,T,P,S) - a set N of non-terminals, a set T of terminals (in our project, these are the <a href=../lex/#navintro>tokens</a> returned by the lexical analyzer and hence we refer to them as tokens frequently), set P of productions and a start variable S. Each production consists of a non-terminal on the left side (head part) and a sequence of tokens and non-terminals (of zero or more length) on the right side (body part). We will explore productions further in detail <a href=#productions>later</a> in this documentation. For more about context free grammars refer to this <a href=https://en.wikipedia.org/wiki/Context-free_grammar>wiki</a> .</p> <p><strong>Example:</strong> This example is an Infix to Postfix converter implemented using YACC. The rules part of the YACC program has been shown below:</p> <div class=highlight><pre><span></span><code><span class=nl>start</span><span class=p>:</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;\n&#39;</span><span class=w> </span><span class=p>{</span><span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>);}</span>
<span class=w>     </span><span class=p>;</span>
<span class=nl>expr</span><span class=p>:</span><span class=w>  </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;+&#39;</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=p>{</span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;+ &quot;</span><span class=p>);}</span>
<span class=w>    </span><span class=o>|</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;*&#39;</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=p>{</span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;* &quot;</span><span class=p>);}</span>
<span class=w>    </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;(&#39;</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;)&#39;</span>
<span class=w>    </span><span class=o>|</span><span class=w> </span><span class=n>DIGIT</span><span class=w>  </span><span class=p>{</span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;NUM%d &quot;</span><span class=p>,</span><span class=n>pos</span><span class=p>);}</span>
<span class=w>    </span><span class=p>;</span>
</code></pre></div> <p>In this example:</p> <p>The set of non-terminals are <code>N = {start, expr}</code></p> <p>The set of terminals are <code>T = {'\n', '+', '*', '(', ')' , DIGIT }</code></p> <p>The start symbol <code>S = start</code></p> <p>Sample Input/Output :</p> <div class=highlight><pre><span></span><code>I: 1+5
O: NUM1 NUM2 +
</code></pre></div> <p>When the input expression 1+5 is given to the parser generated by YACC, the parser prints a <a href=http://en.wikipedia.org/wiki/Reverse_Polish_notation>postfix</a> form of the original expression 1+5 as NUM1 NUM2 + where, NUM1 represents the first number ( 1 ) in the input and NUM2 represents the second number ( 5 ) in the input.</p> <p>Sample Input/Output :</p> <div class=highlight><pre><span></span><code>I: 3+(1*9)+5
O: NUM1 NUM2 NUM3 * + NUM4 +

I: 5$
O: NUM1 error
</code></pre></div> <p>The example above demonstrates the specification of rules in YACC. In this example there are five rules. Each rule has a <em>production part</em> and an <em>action part</em> .The action part consists of C statements enclosed within a { and }. Each production part has a <em>head</em> and a <em>body</em> separated by a '<strong>:</strong>'. For example, the first rule above has production part with start as the head and expr '\n' as the body. The action part for the rule is {exit(1);}. The parser reads the input sequentially and tries to find a pattern match with the body part of each production. When it finds a matching production, the action part of the corresponding rule is executed. The process is repeated till the end of the input.</p> <p>In the above example, when the input 1+5 is given to the parser, it attempts to match the input with the body of the production of the first rule. When the input has been parsed completely and correctly matched with the start production start: expr '\n' the parser executes the action exit(1);. The statements printf("NUM "); and printf("+ "); are executed as result of the input being matched with the productions expr: DIGIT and expr: expr '+' expr respectively. If the parser fails to find any matching body part, it invokes a special yyerror() function. In our example, the yyerror() function is programmed to print the message “error”.</p> <h3 id=yyparse>yyparse()<a class=headerlink href=#yyparse title="Permanent link">&para;</a></h3> <p>The <code>y.tab.c</code> file contains a function yyparse() which is an implementation (in C) of a <a href=http://en.wikipedia.org/wiki/Pushdown_automaton>push down automaton</a>. yyparse() is responsible for parsing the given input file. The function yylex() is invoked by yyparse() to read tokens from the input file. Click <a href=#navexy0>here</a> to view an example of yylex() definition. Note that the yyparse() function is automatically generated by YACC in the y.tab.c file. Although YACC declares yylex() in the y.tab.c file, it does not generate the definition for yylex(). Hence the yylex() function definition has to be supplied by you (either directly by defining yylex() in the <em>auxiliary functions</em> section (explained in the next section) or using a lexical analyzer generator like LEX). Each invocation of yylex() must return the next token (from the input steam) to yyparse(). The action corresponding to a production is executed by yyparse() only after sufficient number of tokens has been read (through repeated invocations of yylex()) to get a complete match with the body of the production.</p> <h2 id=the-structure-of-yacc-programs>The structure of YACC programs<a class=headerlink href=#the-structure-of-yacc-programs title="Permanent link">&para;</a></h2> <p>A YACC program consists of three sections: Declarations, Rules and Auxiliary functions. (Note the similarity with the structure of LEX programs).</p> <div class=highlight><pre><span></span><code><span class=n>DECLARATIONS</span>

<span class=o>%%</span>

<span class=n>RULES</span>

<span class=o>%%</span>

<span class=n>AUXILIARY</span><span class=w> </span><span class=n>FUNCTIONS</span>
</code></pre></div> <h3 id=declarations>Declarations<a class=headerlink href=#declarations title="Permanent link">&para;</a></h3> <p>The declarations section consists of two parts: (i) C declarations and (ii) YACC declarations . The C Declarations are delimited by <code>%{</code> and <code>%}</code>. This part consists of all the declarations required for the C code written in the <em>Actions</em> section and the <em>Auxiliary functions</em> section. YACC copies the contents of this section into the generated y.tab.c file without any modification. The following example shows an abstract outline of the structure of the declarations part of a YACC program:</p> <p><strong>Example :</strong></p> <div class=highlight><pre><span></span><code><span class=cm>/* Beginning of Declarations part */</span>

<span class=o>%</span><span class=p>{</span>
<span class=w>    </span><span class=cm>/*Beginning of C declarations*/</span>

<span class=w>    </span><span class=cm>/*End of C declarations*/</span>
<span class=o>%</span><span class=p>}</span>

<span class=w>    </span><span class=cm>/*Beginning of YACC declarations  */</span>

<span class=w>    </span><span class=cm>/*End of YACC declarations */</span>

<span class=cm>/* End of Declarations Part */</span>
<span class=o>%%</span>
</code></pre></div> <p>The YACC declarations part comprises of declarations of tokens (usually returned by the lexical analyzer). The parser reads the tokens by invoking the function yylex() (To be discussed in detail later).</p> <h3 id=rules>Rules<a class=headerlink href=#rules title="Permanent link">&para;</a></h3> <p>A rule in a YACC program comprises of two parts (i) the production part and (ii) the action part. In this project, the syntax of SIL programming language will be specified in the form of a context free grammar. A rule in YACC is of the form:</p> <div class=highlight><pre><span></span><code><span class=nl>production_head</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>production_body</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>action</span><span class=w> </span><span class=n>in</span><span class=w> </span><span class=n>C</span><span class=w> </span><span class=p>};</span>
</code></pre></div> <p>The following example shows an abstract outline of the structure of the rules part of a YACC program:</p> <div class=highlight><pre><span></span><code><span class=o>%%</span>
<span class=cm>/* Rules Section begins here */</span>

<span class=cm>/* Rules Section ends here */</span>
<span class=o>%%</span>
</code></pre></div> <p>The rules in our example can be found <a href=#navexy0>here</a></p> <h4 id=productions>Productions<a class=headerlink href=#productions title="Permanent link">&para;</a></h4> <p>Each production consists of a production head and a production body. Consider a production from our <a href=#navexy0>example</a>:</p> <div class=highlight><pre><span></span><code>expr : expr &#39;+&#39; expr
</code></pre></div> <p>The expr on the LHS of the <strong>:</strong> in the production is called the <em>head</em> of the production and the expr '+' expr on the RHS of the : is called the <em>body</em> of the production. In the above example, '+' is a terminal (token) and expr is a non-terminal. Users can give name to a token. (for instance we can give the name 'PLUS' to the token '+'). In such cases, the names must be defined in the declarations section. For example have a look at the definition of the token DIGIT <a href=#navexy0>here</a>. The head of a production is always a non-terminal. Every non-terminal in the grammar must appear in the head part of at least one production.</p> <p>Note that a non-terminal in the head part of a production may have one or more production bodies separated by a “|”. Consider the non-terminal expr in our <a href=#navexy0>example</a>. The non-terminal has four production bodies expr '+' expr , expr '*' expr , '(' expr ')' and DIGIT. The first production body has an associated print action op_printf("+") and the second production body has an associated action op_print("*"). yyparse() executes the action only when the body expr '+' expr has been matched with the input. The action part of a single production may have several statements of C code.</p> <h4 id=actions>Actions<a class=headerlink href=#actions title="Permanent link">&para;</a></h4> <p>The action part of a rule consists of C statements enclose within a '{' and '}'. These statements are executed when the input is matched with the body of a production and a <em>reduction</em> takes place. The notion of a <em>reduction</em> will be explained later. From the <a href=#navexy0>example</a> below, consider the following rule:</p> <p>expr: DIGIT {printf("NUM%d ",pos);}</p> <p>In this rule, when the input matches with the body of the production DIGIT, it is <em>reduced</em> to expr and the action {printf("NUM%d ",pos);} is executed.</p> <h4 id=auxiliary-functions>Auxiliary Functions<a class=headerlink href=#auxiliary-functions title="Permanent link">&para;</a></h4> <p>The Auxiliary functions section contains the definitions of three mandatory functions main(), yylex() and yyerror(). You may wish to add your own functions (depending on the the requirement for the application) in the y.tab.c file. Such functions are written in the auxiliary functions section. The <a href=#navexy0>main()</a> function must invoke <a href=#navexy0>yyparse()</a> to parse the input. You will need to write your supporting functions later in this project.</p> <p><strong>Example: intopost.y</strong> <a name=navexy0></a> <div class=highlight><pre><span></span><code><span class=o>%</span><span class=p>{</span>
<span class=cm>/*** Auxiliary declarations section ***/</span>

<span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span>
<span class=cp>#include</span><span class=cpf>&lt;stdlib.h&gt;</span>

<span class=cm>/* Custom function to print an operator*/</span>
<span class=kt>void</span><span class=w> </span><span class=nf>print_operator</span><span class=p>(</span><span class=kt>char</span><span class=w> </span><span class=n>op</span><span class=p>);</span>

<span class=cm>/* Variable to keep track of the position of the number in the input */</span>
<span class=kt>int</span><span class=w> </span><span class=n>pos</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>

<span class=o>%</span><span class=p>}</span>

<span class=w> </span><span class=cm>/*** YACC Declarations section ***/</span>
<span class=o>%</span><span class=n>token</span><span class=w> </span><span class=n>DIGIT</span>
<span class=o>%</span><span class=n>left</span><span class=w> </span><span class=sc>&#39;+&#39;</span>
<span class=o>%</span><span class=n>left</span><span class=w> </span><span class=sc>&#39;*&#39;</span>
<span class=o>%%</span>

<span class=cm>/*** Rules Section ***/</span>
<span class=nl>start</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;\n&#39;</span><span class=w>  </span><span class=p>{</span><span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>);}</span>
<span class=w>      </span><span class=p>;</span>

<span class=nl>expr</span><span class=p>:</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;+&#39;</span><span class=w> </span><span class=n>expr</span><span class=w>     </span><span class=p>{</span><span class=n>print_operator</span><span class=p>(</span><span class=sc>&#39;+&#39;</span><span class=p>);}</span>
<span class=w>    </span><span class=o>|</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;*&#39;</span><span class=w> </span><span class=n>expr</span><span class=w>     </span><span class=p>{</span><span class=n>print_operator</span><span class=p>(</span><span class=sc>&#39;*&#39;</span><span class=p>);}</span>
<span class=w>    </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;(&#39;</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;)&#39;</span>
<span class=w>    </span><span class=o>|</span><span class=w> </span><span class=n>DIGIT</span><span class=w>             </span><span class=p>{</span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;NUM%d &quot;</span><span class=p>,</span><span class=n>pos</span><span class=p>);}</span>
<span class=w>    </span><span class=p>;</span>

<span class=o>%%</span>

<span class=cm>/*** Auxiliary functions section ***/</span>

<span class=kt>void</span><span class=w> </span><span class=n>print_operator</span><span class=p>(</span><span class=kt>char</span><span class=w> </span><span class=n>c</span><span class=p>){</span>
<span class=w>    </span><span class=k>switch</span><span class=p>(</span><span class=n>c</span><span class=p>){</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=sc>&#39;+&#39;</span><span class=w>  </span><span class=p>:</span><span class=w> </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;PLUS &quot;</span><span class=p>);</span>
<span class=w>                    </span><span class=k>break</span><span class=p>;</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=sc>&#39;*&#39;</span><span class=w>  </span><span class=p>:</span><span class=w> </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;MUL &quot;</span><span class=p>);</span>
<span class=w>                    </span><span class=k>break</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=p>;</span>
<span class=p>}</span>

<span class=n>yyerror</span><span class=p>(</span><span class=kt>char</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=o>*</span><span class=n>s</span><span class=p>)</span>
<span class=p>{</span>
<span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;yyerror %s&quot;</span><span class=p>,</span><span class=n>s</span><span class=p>);</span>
<span class=p>}</span>

<span class=n>yylex</span><span class=p>(){</span>
<span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>c</span><span class=p>;</span>
<span class=w>    </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getchar</span><span class=p>();</span>
<span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=n>isdigit</span><span class=p>(</span><span class=n>c</span><span class=p>)){</span>
<span class=w>        </span><span class=n>pos</span><span class=o>++</span><span class=p>;</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>DIGIT</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>c</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=sc>&#39; &#39;</span><span class=p>){</span>
<span class=w>        </span><span class=n>yylex</span><span class=p>();</span><span class=w>         </span><span class=cm>/*This is to ignore whitespaces in the input*/</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>c</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>

<span class=n>main</span><span class=p>()</span>
<span class=p>{</span>
<span class=w> </span><span class=n>yyparse</span><span class=p>();</span>
<span class=w> </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></p> <p><code>y.tab.c</code> file can be generated using the command</p> <div class=highlight><pre><span></span><code>yacc<span class=w> </span>intopost.y
</code></pre></div> <p><code>y.tab.c</code> is compiled using C compiler</p> <div class=highlight><pre><span></span><code><span class=n>gcc</span><span class=w> </span><span class=n>y</span><span class=p>.</span><span class=n>tab</span><span class=p>.</span><span class=n>c</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>%left</code> option is used to resolve shift/reduce conflicts. It is explained in detail later.</p> </div> <p>Sample Input/Output:</p> <div class=highlight><pre><span></span><code>I: 2+2
O: NUM1 NUM2 PLUS
</code></pre></div> <p>When <code>yyparse()</code> matches the input 2+2 with the production body expr '+' expr, it executes the action <code>op_print('+');</code> and as a result prints “PLUS” in place of '+' as per the definition of <code>op_print()</code>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>op_print()</code> is used in the example just to show an example of the declaration, definition and usage of a user defined auxliary function. Generally in this project, we use <code>printf()</code> to display content.</p> </div> <h2 id=a-working-introduction-to-shift-reduce-parsing>A working introduction to shift-reduce parsing<a class=headerlink href=#a-working-introduction-to-shift-reduce-parsing title="Permanent link">&para;</a></h2> <p>YACC uses shift-reduce parsing methodology to parse the given input. The shift-reduce parser is essentially a <a href=http://en.wikipedia.org/wiki/Pushdown_automaton>push down automaton</a> . It consists of a finite state machine with a stack. The stack is used to hold terminal and/or non-terminal symbols. The following is a gentle introduction to shift-reduce parsing.</p> <p>Take note of the following points before we proceed:</p> <p>A shift-reduce parser is initialized in the following <em>configuration</em>.</p> <div class=highlight><pre><span></span><code>STACK: $    I/P BUFFER:  &lt;Input to be parsed&gt; $
</code></pre></div> <p>The input to be parsed, which is a sequence of terminal symbols, is stored in an input buffer with '$' symbol at the end (used as an end-marker). The stack is initialized to contain just the symbol '$'.</p> <p>The parser works by repeatedly performing the following actions :</p> <ol> <li>Read the next terminal symbol from the input and push it into the stack and removing it from the input. This operation is called a shift. (The shift operation will be explained in detail later.)</li> <li>Do some conditional operations on the stack. These operations are called reductions. Not every iteration may involve reductions. (Reductions will be explained in detail later.)</li> <li>Until an error is encountered or the input is successfully parsed.</li> </ol> <p>Parsing ends successfully when the input buffer is empty (except for the end-marker '$') and the stack contains nothing but the '$' followed by the start symbol of the grammar. Error condition occurs when the input does not belong to the language of the grammar and the parser detects the same. We will look at error conditions later.</p> <p>Consider the following context free grammar. This will be used as a running example for this section.</p> <div class=highlight><pre><span></span><code><span class=nl>expr</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;+&#39;</span><span class=w> </span><span class=n>expr</span><span class=w>                                             </span><span class=p>(</span><span class=n>Production</span><span class=w> </span><span class=mi>1</span><span class=p>)</span>
<span class=w>     </span><span class=o>|</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;\*&#39;</span><span class=w> </span><span class=n>expr</span><span class=w>                                            </span><span class=p>(</span><span class=n>Production</span><span class=w> </span><span class=mi>2</span><span class=p>)</span>
<span class=w>     </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;(&#39;</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;)&#39;</span><span class=w>                                              </span><span class=p>(</span><span class=n>Production</span><span class=w> </span><span class=mi>3</span><span class=p>)</span>
<span class=w>     </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;0&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;1&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;2&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;3&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;4&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;5&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;6&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;7&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;8&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;9&#39;</span><span class=w> </span><span class=p>(</span><span class=n>Production</span><span class=w> </span><span class=mi>4</span><span class=p>)</span>
<span class=w>     </span><span class=p>;</span>
</code></pre></div> <p>The terminal set is {+,*,(,),0,1,2,3,4,5,6,7,8,9}. The only non-terminal is 'expr'. Production 4 is actually a collection of 10 productions. We refer them collectively with one production number for simplicity.</p> <p>Let us consider parsing of the input 2+2*3 using this grammar. When the parsing process begins, the contents of the stack and the input buffer would be as follows:</p> <div class=highlight><pre><span></span><code>STACK:  $    I/P BUFFER:     2 + 2 $
</code></pre></div> <p>The contents of the stack and the contents of the input buffer together define the <em>configuration</em> of the parser. On successful completion of parsing, the configuration would be:</p> <div class=highlight><pre><span></span><code>STACK:      $ expr         I/P BUFFER:     $
</code></pre></div> <p>Note here that expr is the start variable of the parser's context free grammar. This is the accepting configuration.</p> <p>At each step of parsing, the parser takes an action resulting in a configuration change. A shift-reduce parser can take four possible <em>parser-actions</em>:</p> <ol> <li><strong>Shift</strong> is the parser-action of removing the next unread terminal from the input buffer and pushing it into the stack. (The input terminal gets “shifted” to the stack).</li> <li><strong>Reduce</strong> is the parser-action of replacing one or more grammar symbols from the top of the stack that matches a body of a production, with the corresponding production head. The contents on top of the stack which matches the right side of a production is called a <em>handle</em>. The process of replacing a handle with the corresponding production head is called a <em>reduction</em>.</li> <li> <p><strong>Accept</strong> is the parser-action indicating that the entire input has been parsed successfully. The parser executes an accept action only if it reaches the accepting configuration – one in which the input buffer is empty and the stack contains just the start variable followed by '$'. Accepting state would be of the form:</p> <div class=highlight><pre><span></span><code>STACK: $ &lt;start\_variable&gt;   I/P BUFFER:       $
</code></pre></div> </li> <li> <p><strong>Error</strong> indicates that an error was encountered while parsing the input. In our example, there is no error. We will see error conditions later.</p> </li> </ol> <h3 id=the-parsers-iteration-steps>The parser's Iteration Steps<a class=headerlink href=#the-parsers-iteration-steps title="Permanent link">&para;</a></h3> <p>After initialization, the parser executes the following algorithm.</p> <div class=highlight><pre><span></span><code>Repeat
      shift the next terminal from the input to the stack.
      While there is a “valid” reduction
        perform the reduction.
Until accepting configuration is reached.
</code></pre></div> <p>At each step of parsing, the shift-reduce parser decides on an action depending on the configuration of the parser.</p> <p>Several details are left out in this description. For instance, what is a “valid reduction”, or what the error conditions are etc. have not been specified. These are determined by the contents of a parsing table maintained by the parser and we will not go into the details here. Instead, we will try to see how the parser operates in the case of our running example.</p> <div class=highlight><pre><span></span><code>(1) STACK: $    I/P BUFFER: 2 + 3 * ( 4 + 5 ) $
</code></pre></div> <p>At this configuration, the parser executes a <em>shift</em> action i.e. 2 is pushed onto the stack resulting in the configuration:</p> <div class=highlight><pre><span></span><code>(2) STACK: $ 2    I/P BUFFER: + 3 * ( 4+ 5 ) $
</code></pre></div> <p>Now, the top of the stack matches the right side (body) of Production 4 i.e., the 2 on the stack is the handle in this case and a reduction takes place replacing the handle with the production head <em>expr</em>.</p> <div class=highlight><pre><span></span><code>(3) STACK: $ expr    I/P BUFFER: + 3 * ( 4 + 5 ) $
</code></pre></div> <p>As there is no further handles to perform reductions, the parser shifts the next terminal '+' from the input to the stack.</p> <div class=highlight><pre><span></span><code>(4) STACK: $ expr +    I/P BUFFER: 3 * ( 4 + 5 ) $
</code></pre></div> <p>In the next iteration, as no reductions are possible, the parser again shifts the next input:</p> <div class=highlight><pre><span></span><code>(5) STACK: $ expr + 3    I/P BUFFER: * ( 4 + 5 ) $
</code></pre></div> <p>Now, the parser can apply Production 4 and <em>reduce</em> the handle '3' on the top of the stack to <em>expr</em>. Thus the parser reduces by Production 4 and replaces '3' with expr.</p> <div class=highlight><pre><span></span><code>(6) STACK: $ expr + expr   I/P BUFFER: * ( 4 + 5 ) $
</code></pre></div> <p>At this point there is a further reduction possible using Production 1. However, the “valid” action here is not to perform the reduction, but shift the next input to the stack. The reason being that '*' has higher precedence over '+'. (similar issues occur with associativity of operators). Unless the parser is somehow is informed about what the correct action is (shift/reduce), under every such situation, the correct precedence/associativity may not be respected. For the time being, it is sufficient to understand that there are ways by which the user can force the parser to act in the right way in most practical situations, particularly when using a parser generator like YACC. Hence we hide these issues for now and assume that the parser is somehow capable of finding the “valid” actions. (Some more details on how this will be done will be explained in the <a href=#conflicts-in-parsing-using-yacc>later</a> sections.) Hence, the next action is a shift.</p> <div class=highlight><pre><span></span><code>(7) STACK: $ expr + expr *   I/P BUFFER: ( 4 + 5 )$
</code></pre></div> <p>In the next few iterations, the parser continuously shifts and reduces to reach the configuration:</p> <div class=highlight><pre><span></span><code>(8) STACK: $ expr + expr * ( expr + expr I/P BUFFER: ) $
</code></pre></div> <p>Now, the handle “expr+expr” matches the body of production 1, hence the parser reduces by production 1.</p> <div class=highlight><pre><span></span><code>(9) STACK: $ expr + expr * ( expr  I/P BUFFER: ) $
</code></pre></div> <p>The parser continues to iterate as the accepting configuration has not been reached. In the next iteration, the parser shifts, as a result emptying the input buffer.</p> <div class=highlight><pre><span></span><code>(10) STACK: $ expr + expr * ( expr )  I/P BUFFER: $
</code></pre></div> <p>Now the parser reduces the handle “ ( expr ) ” by production 3,</p> <div class=highlight><pre><span></span><code>(11) STACK: $ expr + expr * expr  I/P BUFFER: $
</code></pre></div> <p>In the next iteration, as yet another valid reduction is possible, the parser reduces by Production 2</p> <div class=highlight><pre><span></span><code>(12) STACK: $ expr + expr   I/P BUFFER: $
</code></pre></div> <p>As the parser has not reached accepting configuration and there exists another handle top of the stack, the parser further reduces the entire contents of the stack, i.e., the handle “expr + expr” with production 1 and thus puts the start symbol expr on the stack.</p> <div class=highlight><pre><span></span><code>(13) STACK: $ expr    I/P BUFFER: $
</code></pre></div> <p>On reaching accepting configuration, the parser quits iterating. Since the I/P BUFFER is empty and the stack contains only the start variable, the parser executes an accept action, indicating that the input has been parsed successfully. The following table summarizes the step-by-step change in the parser's configuration after each action taken by a shift reduce parser.</p> <table> <thead> <tr> <th>STACK</th> <th>I/P BUFFER</th> <th>PARSER-ACTION EXECUTED</th> </tr> </thead> <tbody> <tr> <td></td> <td>2 + 3 * (4 + 5) $</td> <td>_</td> </tr> <tr> <td>$2</td> <td>+ 3 * ( 4 + 5 ) $</td> <td>SHIFT</td> </tr> <tr> <td>$expr</td> <td>+ 3 * ( 4 + 5 ) $</td> <td>REDUCE</td> </tr> <tr> <td>$expr +</td> <td>3 * ( 4 + 5 ) $</td> <td>SHIFT</td> </tr> <tr> <td>$expr + 3</td> <td>* ( 4 + 5 ) $</td> <td>SHIFT</td> </tr> <tr> <td>$expr + expr</td> <td>* ( 4 + 5) $</td> <td>REDUCE</td> </tr> <tr> <td>$expr + expr *</td> <td>( 4 + 5 ) $</td> <td>SHIFT</td> </tr> <tr> <td>$expr + expr * (</td> <td>4 + 5 ) $</td> <td>SHIFT</td> </tr> <tr> <td>$expr + expr * ( 4</td> <td>+ 5 ) $</td> <td>SHIFT</td> </tr> <tr> <td>$expr + expr * ( expr</td> <td>+ 5 ) $</td> <td>REDUCE</td> </tr> <tr> <td>$expr + expr * ( expr +</td> <td>5 ) $</td> <td>SHIFT</td> </tr> <tr> <td>$expr + expr * ( expr + 5</td> <td>) $</td> <td>SHIFT</td> </tr> <tr> <td>$expr + expr * ( expr + expr</td> <td>) $</td> <td>REDUCE</td> </tr> <tr> <td>$expr + expr * ( expr</td> <td>) $</td> <td>REDUCE</td> </tr> <tr> <td>$expr + expr * ( expr )</td> <td>$</td> <td>SHIFT</td> </tr> <tr> <td>$expr + expr * expr</td> <td>$</td> <td>REDUCE</td> </tr> <tr> <td>$expr + expr</td> <td>$</td> <td>REDUCE</td> </tr> <tr> <td>$expr</td> <td>$</td> <td>REDUCE</td> </tr> <tr> <td>$expr</td> <td>$</td> <td>ACCEPT</td> </tr> </tbody> </table> <p>There are several variants of shift-reduce parsing like the LR(1), SLR(1) and LALR(1) parsing methods. The notion of valid shift or a valid reduce depends on the particular parsing method and can be fairly involved. We will see how routine situations like precedence and associativity of operators can be easily handled when you are using YACC. YACC uses an <a href=http://en.wikipedia.org/wiki/LALR_parser>LALR(1) parsing method</a>. An understanding of the general principles of shift-reduce parsing at the level presented here will be sufficient for most of this project.</p> <h2 id=infix-to-postfix-program>Infix to Postfix program<a class=headerlink href=#infix-to-postfix-program title="Permanent link">&para;</a></h2> <p>When <code>yacc_file.y</code> is fed to YACC, it generates a <code>y.tab.c</code> file. When compiled, this program yields a <a href=#introduction-to-yacc>parser</a>. The generated parser uses shift-reduce parsing to parse the given input. Yacc copies the C declarations (in the Declaration section of input_file.y) and all the auxiliary functions (in the Auxiliary functions section of input_file.y) directly into y.tab.c without any modification. In addition to these, YACC generates the definition of yyparse() in <code>y.tab.c</code>.</p> <p>It is important to understand that, y.tab.c contains the following :</p> <ol> <li>The C declarations from the input_file.y file</li> <li>Generated yyparse() definition</li> <li>All the auxiliary functions from the input_file.y</li> </ol> <p>Recall our <a href=#navexy0>infix to postfix program</a>.</p> <p>Here is a Sample Input and Output: <a name=navsam1></p> <div class=highlight><pre><span></span><code>I: 2+3*(4+5)
O: NUM1 NUM2 NUM3 NUM4 + * +
</code></pre></div> <p>When the expression 2+3 is fed as the input to the generated parser, the main() function in the auxiliary functions section invokes yyparse() as below: (The code for main() from the example is copied below)</p> <div class=highlight><pre><span></span><code><span class=n>main</span><span class=p>()</span>
<span class=p>{</span>
<span class=w> </span><span class=n>yyparse</span><span class=p>();</span>
<span class=w> </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>As noted earlier, yyparse() invokes yylex() to read tokens from the input. For example, when yylex() reads the input 2 and returns the token DIGIT (code of yylex() shown below)</p> <div class=highlight><pre><span></span><code><span class=n>yylex</span><span class=p>()</span>
<span class=p>{</span>
<span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>c</span><span class=p>;</span>
<span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getchar</span><span class=p>();</span>
<span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>isdigit</span><span class=p>(</span><span class=n>c</span><span class=p>))</span><span class=w>  </span><span class=cm>/* Every time a number is found in the input stream,</span>
<span class=cm>                yylex() increments pos and returns a token DIGIT */</span>
<span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=n>pos</span><span class=o>++</span><span class=p>;</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=n>DIGIT</span><span class=p>;</span>
<span class=w> </span><span class=p>}</span>
<span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>c</span><span class=p>;</span><span class=w>   </span><span class=cm>/* If any character other than a number is found,</span>
<span class=cm>                yylex() simply returns the character itself to yyparse() */</span>
<span class=p>}</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>As pos was initialized to 0, it holds the value 1 after returning the first DIGIT, 2 after returning the second DIGIT and so on.</p> </div> <p>yyparse() is the function that parses the given input using shift-reduce parsing. When the reduction of a handle takes place, yyparse() executes the action (specified in the action part of the rule) corresponding to the handle's production in the yacc program. On successful parsing of the given input, yyparse() returns 0. If yyparse() fails to parse the given input, it returns 1.</p> <p>A generalized algorithm of yyparse() would look like:</p> <div class=highlight><pre><span></span><code><span class=n>Initialize</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>stack</span><span class=w> </span><span class=n>with</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>end</span><span class=o>-</span><span class=n>marker</span><span class=w> </span><span class=n>$</span>
<span class=n>new_token</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>yylex</span><span class=p>()</span><span class=w> </span><span class=cm>/* read the first token from the input */</span>
<span class=k>while</span><span class=w> </span><span class=p>(</span><span class=nb>true</span><span class=p>)</span>
<span class=w> </span><span class=k>switch</span><span class=p>(</span><span class=n>parser_action</span><span class=p>(</span><span class=n>stack</span><span class=p>,</span><span class=w> </span><span class=n>new_token</span><span class=p>))</span>
<span class=w>  </span><span class=k>case</span><span class=w> </span><span class=err>&#39;</span><span class=no>reduce</span><span class=err>&#39;</span><span class=p>:</span>
<span class=w>                  </span><span class=n>pop</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>handle</span><span class=w> </span><span class=n>from</span><span class=w> </span><span class=n>stack</span><span class=p>,</span><span class=w> </span><span class=n>replace</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=n>with</span><span class=w> </span><span class=n>the</span>
<span class=w>                  </span><span class=n>head</span><span class=w> </span><span class=n>of</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>handle</span><span class=err>&#39;</span><span class=n>s</span><span class=w> </span><span class=n>production</span><span class=p>.</span><span class=n>Execute</span><span class=w> </span><span class=n>action</span>
<span class=w>                  </span><span class=n>part</span><span class=w> </span><span class=n>in</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>yacc</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=n>corresponding</span><span class=w> </span><span class=n>to</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>handle</span><span class=err>&#39;</span><span class=n>s</span><span class=w> </span><span class=n>production</span>
<span class=w>  </span><span class=k>case</span><span class=w> </span><span class=err>&#39;</span><span class=no>shift</span><span class=err>&#39;</span><span class=p>:</span>
<span class=w>                  </span><span class=n>push</span><span class=w> </span><span class=n>new_token</span><span class=w> </span><span class=n>into</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>stack</span><span class=p>.</span>
<span class=w>            </span><span class=n>new_token</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>yylex</span><span class=p>()</span><span class=w>  </span><span class=cm>/* read the next token from the input */</span>
<span class=w>  </span><span class=k>case</span><span class=w> </span><span class=err>&#39;</span><span class=no>accept</span><span class=err>&#39;</span><span class=p>:</span>
<span class=w>   </span><span class=k>return</span><span class=w> </span><span class=mi>0</span>
<span class=w>  </span><span class=k>case</span><span class=w> </span><span class=err>&#39;</span><span class=no>error</span><span class=err>&#39;</span><span class=p>:</span>
<span class=w>   </span><span class=k>return</span><span class=w> </span><span class=mi>1</span>
</code></pre></div> <p>The following table summarizes the parsing process in every iteration of the above algorithm.</p> <table> <thead> <tr> <th>Input buffer</th> <th>new_ token</th> <th>parser_action() returns</th> <th>Stack contents after parser-action</th> <th>Action executed by yyparse()</th> <th>Output</th> </tr> </thead> <tbody> <tr> <td>1+2$</td> <td>DIGIT</td> <td>_</td> <td>_</td> <td>_</td> <td>_</td> </tr> <tr> <td>1+2$</td> <td>DIGIT</td> <td>SHIFT</td> <td>DIGIT $</td> <td>_</td> <td>_</td> </tr> <tr> <td>+2$</td> <td>+</td> <td>REDUCE</td> <td>expr $</td> <td>printf("NUM%d", pos);</td> <td>NUM1</td> </tr> <tr> <td>+2$</td> <td>+</td> <td>SHIFT</td> <td>+ expr $</td> <td>_</td> <td>NUM1</td> </tr> <tr> <td>2$</td> <td>DIGIT</td> <td>SHIFT</td> <td>DIGIT + expr $</td> <td>_</td> <td>NUM1</td> </tr> <tr> <td>$</td> <td>$</td> <td>REDUCE</td> <td>expr + expr $</td> <td>printf("NUM%d", pos);</td> <td>NUM1 NUM2</td> </tr> <tr> <td>$</td> <td>$</td> <td>REDUCE</td> <td>expr $</td> <td>printf("+ ");</td> <td>NUM1 NUM2 +</td> </tr> <tr> <td>$</td> <td>$</td> <td>ACCEPT</td> <td>expr $</td> <td>_</td> <td>NUM1 NUM2 +</td> </tr> </tbody> </table> <h2 id=conflicts-in-parsing-using-yacc>Conflicts in Parsing using YACC<a class=headerlink href=#conflicts-in-parsing-using-yacc title="Permanent link">&para;</a></h2> <hr> <p>As noted earlier, YACC uses the shift-reduce parsing methodology. Conflicts arise when the parser is unable to make a decision on the action to execute. These conflicts are practically of two-types: shift/reduce conflict and reduce/reduce conflict.</p> <h3 id=resolving-shiftreduce-conflicts>Resolving shift/reduce conflicts<a class=headerlink href=#resolving-shiftreduce-conflicts title="Permanent link">&para;</a></h3> <p>When the parser cannot decide whether to shift or to reduce in a configuration where both the actions seem to be viable options. Consider the following grammar:</p> <div class=highlight><pre><span></span><code><span class=nl>expr</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;+&#39;</span><span class=w> </span><span class=n>expr</span>
<span class=w>     </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;(&#39;</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;)&#39;</span>
<span class=w>     </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;0&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;1&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;2&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;3&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;4&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;5&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;6&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;7&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;8&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;9&#39;</span>
<span class=p>;</span>
</code></pre></div> <p>When the above grammar is fed to YACC, it produces a warning as shown below</p> <div class=highlight><pre><span></span><code>yacc: 1 shift/reduce conflict
</code></pre></div> <p>Let us consider an example to demonstrate a shift-reduce conflict. Consider an input of 1+2+3 to the parser generated by YACC for the above context free grammar. The input can be interpreted as <code>[1+2]+3</code> or <code>1+[2+3]</code>.</p> <p>Case 1: When the parser reaches a configuration of:</p> <div class=highlight><pre><span></span><code>STACK: $ expr+expr  I/P BUFFER: +3 $
</code></pre></div> <p>The parser can choose to reduce by reducing the handle expr+expr on top of the stack to expr.</p> <p>Case 2: When the parser reaches the configuration as in Case 1, it could chose to shift instead of reduce, hence resulting in the configuration of:</p> <div class=highlight><pre><span></span><code>STACK: $ expr+expr+expr  I/P BUFFER: $
</code></pre></div> <p>Now, the parser can reduce expr+expr on top of the stack to expr, following which the contents of the stack expr +expr can be reduced to the expr.</p> <p>The example showed how the parser faced a conflict on deciding between the shift and reduce actions. Such conflicts are called shift/reduce conflicts. If the parser had chosen to reduce (like in Case 1), the input would be interpreted as [1+2]+3 (left associative). If the parser chooses to shift (like in Case 2), the input would be interpreted as 1+[2+3] (right associative). The difference in the interpretations is the associativity of the '+' operator. As the + operator is left associative, we would want the input to be interpreted as (1+2)+3. This can be done by specifying the associativity of the token '+' using the YACC keyword <strong>%left</strong> in the Declarations section as shown below:</p> <div class=highlight><pre><span></span><code><span class=o>%</span><span class=n>left</span><span class=w> </span><span class=sc>&#39;+&#39;</span>
</code></pre></div> <p>Once this had been done, when the parser faces a conflict it refers to the declaration and decides to reduce as the token '+' has been declared left associative. Tokens can be declared to be right associative or non-associative by using the YACC keywords <strong>%right</strong> and <strong>%nonassoc</strong>. As an example, if you add the production expr -&gt; expr '&lt;' expr then declaring</p> <div class=highlight><pre><span></span><code><span class=o>%</span><span class=w> </span><span class=n>nonassoc</span><span class=w> </span><span class=sc>&#39;&lt;&#39;</span>
</code></pre></div> <p>makes the parser return a parser error on inputs like (a&lt;b&lt;c) ).</p> <p>The conflict in our example arises because the grammar is an <a href=http://en.wikipedia.org/wiki/Ambiguous_grammar>ambiguous</a>. Note that, a shift-reduce parser cannot successfully parse ambiguous grammars. To overcome this difficulty, YACC offers certain features like the provision for specifying the associativity (seen above) and precedence (to be seen below) that allows the use of certain ambiguous grammars.</p> <p>Consider another ambiguous grammar:</p> <div class=highlight><pre><span></span><code><span class=nl>expr</span><span class=p>:</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;+&#39;</span><span class=w> </span><span class=n>expr</span>
<span class=w>    </span><span class=o>|</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;*&#39;</span><span class=w> </span><span class=n>expr</span>
<span class=w>    </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;(&#39;</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;)&#39;</span>
<span class=w>    </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;0&#39;</span><span class=o>|</span><span class=sc>&#39;1&#39;</span><span class=o>|</span><span class=sc>&#39;2&#39;</span><span class=o>|</span><span class=sc>&#39;3&#39;</span><span class=o>|</span><span class=sc>&#39;4&#39;</span><span class=o>|</span><span class=sc>&#39;5&#39;</span><span class=o>|</span><span class=sc>&#39;6&#39;</span><span class=o>|</span><span class=sc>&#39;7&#39;</span><span class=o>|</span><span class=sc>&#39;8&#39;</span><span class=o>|</span><span class=sc>&#39;9&#39;</span>
</code></pre></div> <p>When fed to YACC, it produces a warning</p> <div class=highlight><pre><span></span><code>yacc: 4 shift/reduce conflicts.
</code></pre></div> <p>The expressions 2+3+5, 2*3+5, 2+3*5 and 2*3*5 are examples that demonstrate the four different shift reduce conflict cases. In the first example, after reading 2+3 the parser must do a reduce operation because + is left associative (why?). In the third expression, the parser should not perform a reduce operation after reading 2+3 because * has higher precedence over +, whereas, in the second expression, the parser must indeed reduce after reading 2*3 (why?). Thus, the parser must be told the precedence and associativity of operators to avoid such conflicts.</p> <p>The precedence of these operators can be specified as shown below:</p> <div class=highlight><pre><span></span><code><span class=o>%</span><span class=n>left</span><span class=w> </span><span class=sc>&#39;+&#39;</span><span class=w>   </span><span class=cm>/*    &#39;+&#39; is left associative */</span>
<span class=o>%</span><span class=n>left</span><span class=w> </span><span class=sc>&#39;*&#39;</span><span class=w>   </span><span class=cm>/*    &#39;*&#39; is left associative and has higher precedence over &#39;+&#39; */</span>
</code></pre></div> <p>Here '*' gets higher precedence over '+' as it has been listed below the '+' operator. The declarations for the associativity of operators must be made in increasing order of precedence, with operators declared in each line assuming higher precedence over those declared above. If more than one tokens are listed on the same line, they will be assigned equal precedence.</p> <div class=highlight><pre><span></span><code><span class=o>%</span><span class=n>left</span><span class=w> </span><span class=sc>&#39;+&#39;</span><span class=w> </span><span class=sc>&#39;-&#39;</span>
<span class=o>%</span><span class=n>left</span><span class=w> </span><span class=sc>&#39;*&#39;</span><span class=w> </span><span class=sc>&#39;/&#39;</span>
</code></pre></div> <p>Here '*' and '/' have the same precedence, but both have higher precedence than '+' and '-'.</p> <p>YACC resolves shift/reduce conflicts using the precedence and associativity declarations. YACC assigns precedence and associativity for a production as well. A handle's precedence and associativity is the precedence and associativity of the last token (not non-terminal) in the handle.</p> <p>When YACC encounters a shift/reduce conflict, it shifts if the token in the input buffer has a greater precedence than the production of the handle on top of the stack and reduces if the production of the handle on top of the stack has a higher precedence than the token. If the production and the token have same precedence, it reduces if the production corresponding to the handle is left associative and shifts if they are right associative. (NOTE: If the production and token in such a case of equal precedence occur and they both are non associative, YACC reports an error).</p> <table> <thead> <tr> <th>STACK</th> <th>I/P BUFFER</th> <th>PARSER-ACTION EXECUTED</th> </tr> </thead> <tbody> <tr> <td></td> <td>2 + 3 * (4 + 5) $</td> <td>_</td> </tr> <tr> <td>$2</td> <td>+ 3 * ( 4 + 5 ) $</td> <td>SHIFT</td> </tr> <tr> <td>$expr</td> <td>+ 3 * ( 4 + 5 ) $</td> <td>REDUCE</td> </tr> <tr> <td>$expr +</td> <td>3 * ( 4 + 5 ) $</td> <td>SHIFT</td> </tr> <tr> <td>$expr + 3</td> <td>* ( 4 + 5 ) $</td> <td>SHIFT</td> </tr> <tr> <td>$expr + expr</td> <td>* ( 4 + 5) $</td> <td>REDUCE</td> </tr> </tbody> </table> <p>At the last configuration of the above table, The parser faces a shift reduce configuration. To resolve this the parser refers to the precedence declarations (Assuming precedence has been declared), and finds:</p> <div class=highlight><pre><span></span><code><span class=o>%</span><span class=n>left</span><span class=w> </span><span class=sc>&#39;+&#39;</span><span class=w> </span><span class=sc>&#39;-&#39;</span>
<span class=o>%</span><span class=n>left</span><span class=w> </span><span class=sc>&#39;*&#39;</span><span class=w> </span><span class=sc>&#39;/&#39;</span>
</code></pre></div> <p>On finding that the '*' token has a greater precedence than '+', the parser chooses to shift '*' instead of reducing the handle “expr + expr”. Recall, that a handle's precedence and associativity is the precedence and associativity of the last token in the handle. Hence, the handle “expr+expr” has the same precedence as its last token '+'. On comparing the precedence of “expr + expr” and '*', parser finds that '*' has a greater precedence, and hence it decides to shift, resulting in the configuration:</p> <table> <thead> <tr> <th>STACK</th> <th>I/P BUFFER</th> <th>PARSER-ACTION EXECUTED</th> </tr> </thead> <tbody> <tr> <td>$expr + expr *</td> <td>( 4 + 5) $</td> <td>SHIFT</td> </tr> </tbody> </table> <p>And the parser continues to iterate till it reaches accept configuration.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If the precedence and associativity declarations are not specified, YACC shifts by default to resolve a shift/reduce conflict.</p> </div> <h3 id=reducereduce-conflicts>reduce/reduce conflicts<a class=headerlink href=#reducereduce-conflicts title="Permanent link">&para;</a></h3> <p>When the parser cannot decide upon which of several possible reductions to make it faces a reduce/reduce conflict. For example, consider the following grammar:</p> <div class=highlight><pre><span></span><code>program     :  statement
            | conditional
statement   :  if boolean then stmt else stmt
            |  stmt
conditional :  if boolean then stmt else stmt
</code></pre></div> <p>And the configuration to be:</p> <div class=highlight><pre><span></span><code>STACK     :    $ if boolean then stmt else stmt
I/P BUFFER:    $
</code></pre></div> <p>The handle “if boolean then stmt else stmt” can be reduced using</p> <div class=highlight><pre><span></span><code>statement : if boolean then stmt else stmt

 or

conditional : if boolean then stmt else stmt
</code></pre></div> <p>i.e., there are more than one possible reductions. The parser faces a conflict on deciding which of the several (two in this example) productions to reduce by. This conflict is called reduce/reduce conflict.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Reduce-reduce conflicts are bad to have in a grammar. They are indicative of the fact that your grammar is not properly designed. Always make it a point to modify the grammar so that there are no more reduce-reduce conflicts.</p> </div> <h2 id=passing-values-from-the-yylex-to-yyparse>Passing values from the yylex() to yyparse()<a class=headerlink href=#passing-values-from-the-yylex-to-yyparse title="Permanent link">&para;</a></h2> <p>The previous infix to postfix program prints the structure of the postfix expression and not the postfix expression itself. For the parser to print the postfix expression it would need the value associated with every DIGIT token. For example, the value associated with the token NUM1 in the first <a href=#navsam1>sample input/output</a> is 2. The value associated with a token is called an <strong>attribute</strong> of the token. For example, 2 is an attribute value of NUM1.</p> <p>In the previous program, yylex() simply returns the token DIGIT to yyparse() and does not return any value associated with it. In order to access the value of the token DIGIT, there must be some method to return an attribute along with the token from yylex() to yyparse(). This can be achieved using a variable called <strong>yylval</strong>. The following program demonstrates the use of yylval:</p> <div class=highlight><pre><span></span><code><span class=o>%</span><span class=p>{</span>

<span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdlib.h&gt;</span>

<span class=o>%</span><span class=p>}</span>

<span class=o>%</span><span class=n>token</span><span class=w> </span><span class=n>DIGIT</span>
<span class=o>%</span><span class=n>left</span><span class=w> </span><span class=sc>&#39;+&#39;</span>
<span class=o>%</span><span class=n>left</span><span class=w> </span><span class=sc>&#39;*&#39;</span>

<span class=o>%%</span>
<span class=nl>start</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;\n&#39;</span><span class=w>  </span><span class=p>{</span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;</span><span class=se>\n</span><span class=s>Complete&quot;</span><span class=p>);</span><span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>);}</span>
<span class=w> </span><span class=p>;</span>

<span class=nl>expr</span><span class=p>:</span><span class=w>  </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;+&#39;</span><span class=w> </span><span class=n>expr</span><span class=w>  </span><span class=p>{</span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;+ &quot;</span><span class=p>);}</span>
<span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;*&#39;</span><span class=w> </span><span class=n>expr</span><span class=w>  </span><span class=p>{</span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;* &quot;</span><span class=p>);}</span>
<span class=w> </span><span class=o>|</span><span class=w> </span><span class=sc>&#39;(&#39;</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=sc>&#39;)&#39;</span>
<span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>DIGIT</span><span class=w>   </span><span class=p>{</span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d &quot;</span><span class=p>,</span><span class=n>$1</span><span class=p>);}</span>
<span class=w> </span><span class=p>;</span>

<span class=o>%%</span>

<span class=n>yyerror</span><span class=p>()</span>
<span class=p>{</span>
<span class=w> </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;Error&quot;</span><span class=p>);</span>
<span class=p>}</span>

<span class=n>yylex</span><span class=p>()</span>
<span class=p>{</span>
<span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>c</span><span class=p>;</span>
<span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getchar</span><span class=p>();</span>
<span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>isdigit</span><span class=p>(</span><span class=n>c</span><span class=p>))</span>
<span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=n>yylval</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=sc>&#39;0&#39;</span><span class=p>;</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=n>DIGIT</span><span class=p>;</span>

<span class=w> </span><span class=p>}</span>
<span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>c</span><span class=p>;</span>
<span class=p>}</span>

<span class=n>main</span><span class=p>()</span>
<span class=p>{</span>
<span class=w> </span><span class=n>yyparse</span><span class=p>();</span>
<span class=w> </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>Sample Input/Output</p> <div class=highlight><pre><span></span><code>I: 1+2*3
O: 1 2 3 * +

I: (2+7)*4
O: 2 7 + 4 *
</code></pre></div> <p><em>When yylex() recognizes a token, the YACC defined variable <strong>yylval</strong> is used to store the attribute value of a token</em>. yylval is a global variable of the type YYSTYPE declared in y.tab.c. By default, YYSTYPE is of the type int. This is evident from the following code segment found in y.tab.c</p> <div class=highlight><pre><span></span><code><span class=k>typedef</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>YYSTYPE</span><span class=p>;</span>
</code></pre></div> <p>As a result, yylval (which is originally of the type YYSTYPE), has an inferred type int. It is used to return additional information about the lexeme found to the parser i.e., yylval is used to return an attribute in addition to the token to the parser.</p> <p>In the above example, the yylex() returns the token DIGIT and the value of the token in the following code segment under definition of yylex():</p> <div class=highlight><pre><span></span><code><span class=n>yylval</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=sc>&#39;0&#39;</span><span class=p>;</span>
<span class=k>return</span><span class=w> </span><span class=n>DIGIT</span><span class=p>;</span>
</code></pre></div> <p>Note that in the above code segment, the automatic type casting feature of a C compiler has been implicitly used. The attribute of a token (i.e., the value of yylval associated with the token when it was returned by yylex()) can be accessed in the action of a YACC rule using $i (where i is the position of the token in the body of a production).</p> <p><strong>Example :</strong></p> <div class=highlight><pre><span></span><code><span class=nl>expr</span><span class=p>:</span><span class=w> </span><span class=n>DIGIT</span><span class=w>   </span><span class=p>{</span><span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=o>%</span><span class=n>d</span><span class=err>”</span><span class=p>,</span><span class=n>$1</span><span class=p>);}</span>
</code></pre></div> <p>The action prints the attribute associated with the token DIGIT obtained through $1.</p> <p>YYSTYPE can be re-defined to any user defined data type by the programmer in the YACC declarations section. This will allow yylex() to return attributes of types other than integer. We will learn more about customizing YYSTYPE in the later stages of this documentation.</p> <h2 id=exercises>Exercises<a class=headerlink href=#exercises title="Permanent link">&para;</a></h2> <div class="admonition question"> <p class=admonition-title>Exercise 1</p> <p>Program to recognize nested IF control statements and display the levels of nesting.</p> </div> <div class="admonition question"> <p class=admonition-title>Exercise 2</p> <p>Program to recognize a valid variable, which starts with a letter,followed by any number of letters or digits.</p> </div> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">&para;</a></h2> <p>For further details on the topics covered in this document, the reader may refer to the following :</p> <ol> <li>Compilers : Principles,Techniques and Tools by Alfred V.Aho, Monica S. Lam, Ravi Sethi and Jeffrey D.Ulman .</li> <li>Modern Compiler Implementation in C by Andrew W.Appel</li> <li>Flex &amp; Bison by John Levine</li> <li><a href=http://dinosaur.compilertools.net/ >http://dinosaur.compilertools.net/</a></li> </ol> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> <a href=https://creativecommons.org/licenses/by-nc/4.0/ rel=license> <img alt="Creative Commons License" style=border-width:0 src=https://licensebuttons.net/l/by-nc/4.0/80x15.png> </a> National Insititute of Technology, Calicut </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/silcnitc target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://groups.google.com/g/expl-users target=_blank rel=noopener title=groups.google.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 488 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.tabs", "navigation.top", "navigation.sections"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.fe8b6f2b.min.js></script> </body> </html>