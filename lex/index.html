<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Compiler Lab website for NIT Calicut"><link href=https://silcnitc.github.io/expl-docs/lex/ rel=canonical><link href=../oexpltestprograms/test7/ rel=prev><link href=../yacc/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.31"><title>Using lex - EXPL NIT-C</title><link rel=stylesheet href=../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=purple data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#using-lex class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <b>Site is undergoing migration.</b> Old URL: <a href=https://silcnitc.github.io target=_blank target=_blank rel="nofollow noopener">https://silcnitc.github.io</a> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="EXPL NIT-C" class="md-header__button md-logo" aria-label="EXPL NIT-C" data-md-component=logo> <img src=../img/nitc-logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> EXPL NIT-C </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Using lex </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=purple data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=purple data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../about/philosophy/ class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=../roadmap/ class=md-tabs__link> Roadmap </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../documentation/ class=md-tabs__link> Documentation </a> </li> <li class=md-tabs__item> <a href=../feedback/ class=md-tabs__link> Student Feedback </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="EXPL NIT-C" class="md-nav__button md-logo" aria-label="EXPL NIT-C" data-md-component=logo> <img src=../img/nitc-logo.png alt=logo> </a> EXPL NIT-C </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> About </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../about/philosophy/ class=md-nav__link> <span class=md-ellipsis> Philosophy </span> </a> </li> <li class=md-nav__item> <a href=../about/authors/ class=md-nav__link> <span class=md-ellipsis> Authors </span> </a> </li> <li class=md-nav__item> <a href=../about/license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Roadmap </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Roadmap </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../roadmap/ class=md-nav__link> <span class=md-ellipsis> Roadmap </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-00/ class=md-nav__link> <span class=md-ellipsis> Stage 0 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-01/ class=md-nav__link> <span class=md-ellipsis> Stage 1 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-02/ class=md-nav__link> <span class=md-ellipsis> Stage 2 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-03/ class=md-nav__link> <span class=md-ellipsis> Stage 3 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-04/ class=md-nav__link> <span class=md-ellipsis> Stage 4 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-05/ class=md-nav__link> <span class=md-ellipsis> Stage 5 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-06/ class=md-nav__link> <span class=md-ellipsis> Stage 6 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-07/ class=md-nav__link> <span class=md-ellipsis> Stage 7 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-08/ class=md-nav__link> <span class=md-ellipsis> Stage 8 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Documentation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../documentation/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class=md-nav__item> <a href=../codegen/ class=md-nav__link> <span class=md-ellipsis> Code Generation </span> </a> </li> <li class=md-nav__item> <a href=../abi/ class=md-nav__link> <span class=md-ellipsis> Application Binary Interface </span> </a> </li> <li class=md-nav__item> <a href=../libinterface/ class=md-nav__link> <span class=md-ellipsis> Library Implementation </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex> <span class=md-ellipsis> ExPL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> ExPL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../expl/ class=md-nav__link> <span class=md-ellipsis> ExpL Specification </span> </a> </li> <li class=md-nav__item> <a href=../grammar-outline/ class=md-nav__link> <span class=md-ellipsis> ExpL Grammar Outline </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_3> <label class=md-nav__link for=__nav_4_5_3 id=__nav_4_5_3_label tabindex=0> <span class=md-ellipsis> Compile Time Data Structures for ExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_3> <span class="md-nav__icon md-icon"></span> Compile Time Data Structures for ExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../data-structures/ class=md-nav__link> <span class=md-ellipsis> Compile Time Data Structures for ExpL </span> </a> </li> <li class=md-nav__item> <a href=../data_structures/abstract-syntax-tree/ class=md-nav__link> <span class=md-ellipsis> Abstract Syntax Tree </span> </a> </li> <li class=md-nav__item> <a href=../data_structures/type-table/ class=md-nav__link> <span class=md-ellipsis> Type Table </span> </a> </li> <li class=md-nav__item> <a href=../data_structures/global-symbol-table/ class=md-nav__link> <span class=md-ellipsis> Global Symbol Table </span> </a> </li> <li class=md-nav__item> <a href=../data_structures/local-symbol-table/ class=md-nav__link> <span class=md-ellipsis> Local Symbol Table </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_4> <label class=md-nav__link for=__nav_4_5_4 id=__nav_4_5_4_label tabindex=0> <span class=md-ellipsis> Run Time Data Structures for ExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_4> <span class="md-nav__icon md-icon"></span> Run Time Data Structures for ExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../run-data-structures/ class=md-nav__link> <span class=md-ellipsis> Run Time Data Structures for ExpL </span> </a> </li> <li class=md-nav__item> <a href=../run_data_structures/heap/ class=md-nav__link> <span class=md-ellipsis> Heap Allocation </span> </a> </li> <li class=md-nav__item> <a href=../run_data_structures/register/ class=md-nav__link> <span class=md-ellipsis> Register Allocation </span> </a> </li> <li class=md-nav__item> <a href=../run_data_structures/run-time-stack/ class=md-nav__link> <span class=md-ellipsis> Stack Allocation </span> </a> </li> <li class=md-nav__item> <a href=../run_data_structures/static-allocation/ class=md-nav__link> <span class=md-ellipsis> Static Allocation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_5> <label class=md-nav__link for=__nav_4_5_5 id=__nav_4_5_5_label tabindex=0> <span class=md-ellipsis> ExPL Test Programs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_5> <span class="md-nav__icon md-icon"></span> ExPL Test Programs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../testprograms/ class=md-nav__link> <span class=md-ellipsis> Test Programs </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-01/ class=md-nav__link> <span class=md-ellipsis> Program 1 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-02/ class=md-nav__link> <span class=md-ellipsis> Program 2 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-03/ class=md-nav__link> <span class=md-ellipsis> Program 3 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-04/ class=md-nav__link> <span class=md-ellipsis> Program 4 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-05/ class=md-nav__link> <span class=md-ellipsis> Program 5 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-06/ class=md-nav__link> <span class=md-ellipsis> Program 6 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-07/ class=md-nav__link> <span class=md-ellipsis> Program 7 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-08/ class=md-nav__link> <span class=md-ellipsis> Program 8 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-09/ class=md-nav__link> <span class=md-ellipsis> Program 9 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-10/ class=md-nav__link> <span class=md-ellipsis> Program 10 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-11/ class=md-nav__link> <span class=md-ellipsis> Program 11 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-12/ class=md-nav__link> <span class=md-ellipsis> Program 12 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_5_14> <label class=md-nav__link for=__nav_4_5_5_14 id=__nav_4_5_5_14_label tabindex=0> <span class=md-ellipsis> Stage 4 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_5_5_14_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_5_14> <span class="md-nav__icon md-icon"></span> Stage 4 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../testprograms/stage4/bubblesort/ class=md-nav__link> <span class=md-ellipsis> Bubble Sort </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/stage4/fibaofn/ class=md-nav__link> <span class=md-ellipsis> Fibonacci </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/stage4/prime/ class=md-nav__link> <span class=md-ellipsis> Prime </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/stage4/sum-to-n-fact/ class=md-nav__link> <span class=md-ellipsis> Sum to n! </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6 id=__nav_4_6_label tabindex> <span class=md-ellipsis> OExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> OExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../oexpl-specification/ class=md-nav__link> <span class=md-ellipsis> OExpL Specification </span> </a> </li> <li class=md-nav__item> <a href=../oexpl-grammar-outline/ class=md-nav__link> <span class=md-ellipsis> OExpL Grammar Outline </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6_3> <label class=md-nav__link for=__nav_4_6_3 id=__nav_4_6_3_label tabindex=0> <span class=md-ellipsis> Compile Time Data Structures for OExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6_3> <span class="md-nav__icon md-icon"></span> Compile Time Data Structures for OExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../oexpl-data-structures/ class=md-nav__link> <span class=md-ellipsis> Compile Time Data Structures for OExpL </span> </a> </li> <li class=md-nav__item> <a href=../oexpl_data_structures/class-table/ class=md-nav__link> <span class=md-ellipsis> Class Table </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6_4> <label class=md-nav__link for=__nav_4_6_4 id=__nav_4_6_4_label tabindex=0> <span class=md-ellipsis> Run Time Data Structures for OExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6_4> <span class="md-nav__icon md-icon"></span> Run Time Data Structures for OExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../oexpl-run-data-structures/ class=md-nav__link> <span class=md-ellipsis> Run Time Data Structures for OExpL </span> </a> </li> <li class=md-nav__item> <a href=../oexpl_runtime_data_structures/virtual_function_table/ class=md-nav__link> <span class=md-ellipsis> Virtual Function Table </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../oexpl-runtime-binding-tutorial/ class=md-nav__link> <span class=md-ellipsis> OExPL Runtime Binding </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6_6> <label class=md-nav__link for=__nav_4_6_6 id=__nav_4_6_6_label tabindex=0> <span class=md-ellipsis> OExPL Test Programs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_6_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6_6> <span class="md-nav__icon md-icon"></span> OExPL Test Programs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../oexpl-testprograms/ class=md-nav__link> <span class=md-ellipsis> OExPL Test Programs </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test1/ class=md-nav__link> <span class=md-ellipsis> Program 1 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test2/ class=md-nav__link> <span class=md-ellipsis> Program 2 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test3/ class=md-nav__link> <span class=md-ellipsis> Program 3 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test4/ class=md-nav__link> <span class=md-ellipsis> Program 4 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test5/ class=md-nav__link> <span class=md-ellipsis> Program 5 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test6/ class=md-nav__link> <span class=md-ellipsis> Program 6 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test7/ class=md-nav__link> <span class=md-ellipsis> Program 7 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_7 checked> <label class=md-nav__link for=__nav_4_7 id=__nav_4_7_label tabindex> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_7_label aria-expanded=true> <label class=md-nav__title for=__nav_4_7> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Using LEX </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Using LEX </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#the-structure-of-lex-programs class=md-nav__link> <span class=md-ellipsis> The structure of LEX programs </span> </a> <nav class=md-nav aria-label="The structure of LEX programs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#declarations class=md-nav__link> <span class=md-ellipsis> Declarations </span> </a> </li> <li class=md-nav__item> <a href=#rules class=md-nav__link> <span class=md-ellipsis> Rules </span> </a> </li> <li class=md-nav__item> <a href=#auxiliary-functions class=md-nav__link> <span class=md-ellipsis> Auxiliary functions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-yyvariables class=md-nav__link> <span class=md-ellipsis> The yyvariables </span> </a> <nav class=md-nav aria-label="The yyvariables"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#yyin class=md-nav__link> <span class=md-ellipsis> yyin </span> </a> </li> <li class=md-nav__item> <a href=#yytext class=md-nav__link> <span class=md-ellipsis> yytext </span> </a> </li> <li class=md-nav__item> <a href=#yyleng class=md-nav__link> <span class=md-ellipsis> yyleng </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-yyfunctions class=md-nav__link> <span class=md-ellipsis> The yyfunctions </span> </a> <nav class=md-nav aria-label="The yyfunctions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#yylex class=md-nav__link> <span class=md-ellipsis> yylex() </span> </a> </li> <li class=md-nav__item> <a href=#yywrap class=md-nav__link> <span class=md-ellipsis> yywrap() </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#even-oddl-a-complete-lex-program class=md-nav__link> <span class=md-ellipsis> even-odd.l - a complete LEX program </span> </a> </li> <li class=md-nav__item> <a href=#disambiguation-rules class=md-nav__link> <span class=md-ellipsis> Disambiguation Rules </span> </a> </li> <li class=md-nav__item> <a href=#pattern-matching-using-lex class=md-nav__link> <span class=md-ellipsis> Pattern matching using LEX </span> </a> </li> <li class=md-nav__item> <a href=#a-token-simulator-program class=md-nav__link> <span class=md-ellipsis> A token simulator program </span> </a> </li> <li class=md-nav__item> <a href=#construction-of-a-dfa-from-a-regular-expression class=md-nav__link> <span class=md-ellipsis> Construction of a DFA from a regular expression </span> </a> <nav class=md-nav aria-label="Construction of a DFA from a regular expression"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-intermediate-syntax-tree class=md-nav__link> <span class=md-ellipsis> The intermediate syntax tree </span> </a> </li> <li class=md-nav__item> <a href=#the-intermediate-syntax-tree_1 class=md-nav__link> <span class=md-ellipsis> The intermediate syntax tree </span> </a> </li> <li class=md-nav__item> <a href=#the-intermediate-syntax-tree_2 class=md-nav__link> <span class=md-ellipsis> The intermediate syntax tree </span> </a> </li> <li class=md-nav__item> <a href=#the-dfa-simulation-algorithm class=md-nav__link> <span class=md-ellipsis> The DFA simulation algorithm </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-the-generated-lexical-analyzer class=md-nav__link> <span class=md-ellipsis> Using the generated lexical analyzer </span> </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> <span class=md-ellipsis> References </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../yacc/ class=md-nav__link> <span class=md-ellipsis> Using YACC </span> </a> </li> <li class=md-nav__item> <a href=../ywl/ class=md-nav__link> <span class=md-ellipsis> Using YACC with LEX </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_7_4> <label class=md-nav__link for=__nav_4_7_4 id=__nav_4_7_4_label tabindex=0> <span class=md-ellipsis> GDB </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_7_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_7_4> <span class="md-nav__icon md-icon"></span> GDB </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../gdb/ class=md-nav__link> <span class=md-ellipsis> Using GDB </span> </a> </li> <li class=md-nav__item> <a href=../gdb-files/ class=md-nav__link> <span class=md-ellipsis> GDB Input Files </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../label-translation/ class=md-nav__link> <span class=md-ellipsis> Label Translation </span> </a> </li> <li class=md-nav__item> <a href=../install/ class=md-nav__link> <span class=md-ellipsis> XSM Simulator Installation </span> </a> </li> <li class=md-nav__item> <a href=../xsmusagespec/ class=md-nav__link> <span class=md-ellipsis> XSM Simulator Instructions </span> </a> </li> <li class=md-nav__item> <a href=../xsm-environment-tut/ class=md-nav__link> <span class=md-ellipsis> XSM Environment Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../library-implementation/ class=md-nav__link> <span class=md-ellipsis> Library Implementation </span> </a> </li> <li class=md-nav__item> <a href=../attribute/ class=md-nav__link> <span class=md-ellipsis> Attribute Synthesis </span> </a> </li> <li class=md-nav__item> <a href=../Data_Structures/ class=md-nav__link> <span class=md-ellipsis> Data Structures for ExpL Compilation/Interpretation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_8> <label class=md-nav__link for=__nav_4_8 id=__nav_4_8_label tabindex> <span class=md-ellipsis> Misc </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_8_label aria-expanded=false> <label class=md-nav__title for=__nav_4_8> <span class="md-nav__icon md-icon"></span> Misc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ex1/ class=md-nav__link> <span class=md-ellipsis> Exercise 1 </span> </a> </li> <li class=md-nav__item> <a href=../explusagespec/ class=md-nav__link> <span class=md-ellipsis> ExPL Usage spec? </span> </a> </li> <li class=md-nav__item> <a href=../libinterfaceexpl/ class=md-nav__link> <span class=md-ellipsis> ExPL Library Interface? </span> </a> </li> <li class=md-nav__item> <a href=../help/ class=md-nav__link> <span class=md-ellipsis> help </span> </a> </li> <li class=md-nav__item> <a href=../oexpl/ class=md-nav__link> <span class=md-ellipsis> OExPL </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Student Feedback </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Student Feedback </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../feedback/ class=md-nav__link> <span class=md-ellipsis> Student Feedback </span> </a> </li> <li class=md-nav__item> <a href=../feedback/nitc-winter-2021/ class=md-nav__link> <span class=md-ellipsis> NIT-C Winter 2021 </span> </a> </li> <li class=md-nav__item> <a href=../feedback/nitc-winter-2017/ class=md-nav__link> <span class=md-ellipsis> NIT-C Winter 2017 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#the-structure-of-lex-programs class=md-nav__link> <span class=md-ellipsis> The structure of LEX programs </span> </a> <nav class=md-nav aria-label="The structure of LEX programs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#declarations class=md-nav__link> <span class=md-ellipsis> Declarations </span> </a> </li> <li class=md-nav__item> <a href=#rules class=md-nav__link> <span class=md-ellipsis> Rules </span> </a> </li> <li class=md-nav__item> <a href=#auxiliary-functions class=md-nav__link> <span class=md-ellipsis> Auxiliary functions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-yyvariables class=md-nav__link> <span class=md-ellipsis> The yyvariables </span> </a> <nav class=md-nav aria-label="The yyvariables"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#yyin class=md-nav__link> <span class=md-ellipsis> yyin </span> </a> </li> <li class=md-nav__item> <a href=#yytext class=md-nav__link> <span class=md-ellipsis> yytext </span> </a> </li> <li class=md-nav__item> <a href=#yyleng class=md-nav__link> <span class=md-ellipsis> yyleng </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-yyfunctions class=md-nav__link> <span class=md-ellipsis> The yyfunctions </span> </a> <nav class=md-nav aria-label="The yyfunctions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#yylex class=md-nav__link> <span class=md-ellipsis> yylex() </span> </a> </li> <li class=md-nav__item> <a href=#yywrap class=md-nav__link> <span class=md-ellipsis> yywrap() </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#even-oddl-a-complete-lex-program class=md-nav__link> <span class=md-ellipsis> even-odd.l - a complete LEX program </span> </a> </li> <li class=md-nav__item> <a href=#disambiguation-rules class=md-nav__link> <span class=md-ellipsis> Disambiguation Rules </span> </a> </li> <li class=md-nav__item> <a href=#pattern-matching-using-lex class=md-nav__link> <span class=md-ellipsis> Pattern matching using LEX </span> </a> </li> <li class=md-nav__item> <a href=#a-token-simulator-program class=md-nav__link> <span class=md-ellipsis> A token simulator program </span> </a> </li> <li class=md-nav__item> <a href=#construction-of-a-dfa-from-a-regular-expression class=md-nav__link> <span class=md-ellipsis> Construction of a DFA from a regular expression </span> </a> <nav class=md-nav aria-label="Construction of a DFA from a regular expression"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-intermediate-syntax-tree class=md-nav__link> <span class=md-ellipsis> The intermediate syntax tree </span> </a> </li> <li class=md-nav__item> <a href=#the-intermediate-syntax-tree_1 class=md-nav__link> <span class=md-ellipsis> The intermediate syntax tree </span> </a> </li> <li class=md-nav__item> <a href=#the-intermediate-syntax-tree_2 class=md-nav__link> <span class=md-ellipsis> The intermediate syntax tree </span> </a> </li> <li class=md-nav__item> <a href=#the-dfa-simulation-algorithm class=md-nav__link> <span class=md-ellipsis> The DFA simulation algorithm </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-the-generated-lexical-analyzer class=md-nav__link> <span class=md-ellipsis> Using the generated lexical analyzer </span> </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> <span class=md-ellipsis> References </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=using-lex>Using <code>lex</code><a class=headerlink href=#using-lex title="Permanent link">&para;</a></h1> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p><strong>LEX</strong> is a tool used to generate a lexical analyzer. This document is a tutorial for the use of LEX for <strong>ExpL Compiler</strong> development. Technically, LEX translates a set of regular expression specifications (given as input in input_file.l) into a C implementation of a corresponding finite state machine (lex.yy.c). This C program, when compiled, yields an executable lexical analyzer.</p> <p><img alt src=../img/lex_1.png></p> <p>The source ExpL program is fed as the input to the the lexical analyzer which produces a sequence of tokens as output. (Tokens are explained below). Conceptually, a lexical analyzer scans a given source ExpL program and produces an output of tokens.</p> <p>Each token is specified by a token name. The token name is an abstract symbol representing the kind of lexical unit, e.g., a particular keyword, or a sequence of input characters denoting an identifier. The token names are the input symbols that the parser processes. For instance integer, boolean, begin, end, if, while etc. are tokens in ExpL.</p> <div class=highlight><pre><span></span><code><span class=s>&quot;integer&quot;</span><span class=w>   </span><span class=p>{</span><span class=k>return</span><span class=w> </span><span class=n>ID_TYPE_INTEGER</span><span class=p>;}</span>
</code></pre></div> <p>This example demonstrates the specification of a <strong>rule</strong> in LEX. The rule in this example specifies that the lexical analyzer must return the token named ID_TYPE_INTEGER when the pattern “integer” is found in the input file. A rule in a LEX program comprises of a 'pattern' part (specified by a regular expression) and a corresponding (semantic) 'action' part (a sequence of C statements). In the above example, “integer” is the pattern and {return ID_TYPE_INTEGER;} is the corresponding action. The statements in the action part will be executed when the pattern is detected in the input.</p> <p><a href=https://en.wikipedia.org/wiki/Lex_(software)>Lex</a> was developed by <a href=https://en.wikipedia.org/wiki/Mike_Lesk>Mike Lesk</a> and <a href=https://en.wikipedia.org/wiki/Eric_Schmidt>Eric Schmidt</a> at <a href=https://en.wikipedia.org/wiki/Bell_Labs>Bell labs</a>.</p> <h2 id=the-structure-of-lex-programs>The structure of LEX programs<a class=headerlink href=#the-structure-of-lex-programs title="Permanent link">&para;</a></h2> <p>A LEX program consists of three sections : <strong>Declarations, Rules and Auxiliary functions</strong></p> <div class=highlight><pre><span></span><code><span class=n>DECLARATIONS</span>

<span class=o>%%</span>

<span class=n>RULES</span>

<span class=o>%%</span>

<span class=n>AUXILIARY</span><span class=w> </span><span class=n>FUNCTIONS</span>
</code></pre></div> <h3 id=declarations>Declarations<a class=headerlink href=#declarations title="Permanent link">&para;</a></h3> <p>The declarations section consists of two parts, <strong>auxiliary declarations</strong> and <strong>regular definitions</strong>.</p> <p>The auxiliary declarations are copied as such by LEX to the output <em>lex.yy.c</em> file. This C code consists of instructions to the C compiler and are not processed by the LEX tool.The auxiliary declarations (which are optional) are written in C language and are enclosed within ' %{ ' and ' %} ' . It is generally used to declare functions, include header files, or define global variables and constants.</p> <p>LEX allows the use of short-hands and extensions to regular expressions for the regular definitions. A regular definition in LEX is of the form : <strong>D   R</strong>    where D is the symbol representing the regular expression R.</p> <p><strong>Example:</strong></p> <div class=highlight><pre><span></span><code><span class=cm>/*Declarations section start here*/</span>

<span class=cm>/* Auxiliary declarations start here*/</span>

<span class=o>%</span><span class=p>{</span>
<span class=w> </span><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
<span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>global_variable</span><span class=p>;</span>
<span class=o>%</span><span class=p>}</span>

<span class=cm>/*Auxiliary declarations end &amp; Regular definitions start here*/</span>

<span class=w>    </span><span class=n>number</span><span class=w> </span><span class=p>[</span><span class=mi>0-9</span><span class=p>]</span><span class=o>+</span><span class=w>           </span><span class=c1>//Regular definition</span>
<span class=w>    </span><span class=n>op</span><span class=w>     </span><span class=p>[</span><span class=o>-|+|*|/|^|=</span><span class=p>]</span><span class=w>    </span><span class=c1>//Regular definition</span>

<span class=cm>/*Declarations section ends here*/</span>

<span class=o>%%</span>

<span class=cm>/* Rules */</span>

<span class=o>%%</span>

<span class=cm>/* Auxiliary functions */</span>
</code></pre></div> <h3 id=rules>Rules<a class=headerlink href=#rules title="Permanent link">&para;</a></h3> <p>Rules in a LEX program consists of two parts :</p> <ol> <li>The pattern to be matched</li> <li>The corresponding action to be executed</li> </ol> <p><strong>Example:</strong></p> <div class=highlight><pre><span></span><code><span class=cm>/* Declarations*/</span>
<span class=o>%%</span>

<span class=w>    </span><span class=p>{</span><span class=n>number</span><span class=p>}</span><span class=w>  </span><span class=p>{</span><span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=w> </span><span class=n>number</span><span class=err>”</span><span class=p>);}</span>
<span class=w>    </span><span class=p>{</span><span class=n>op</span><span class=p>}</span><span class=w>      </span><span class=p>{</span><span class=n>printf</span><span class=p>(</span><span class=err>“</span><span class=w> </span><span class=n>operator</span><span class=err>”</span><span class=p>);}</span>

<span class=o>%%</span>
<span class=cm>/* Auxiliary functions */</span>
</code></pre></div> <p>The pattern to be matched is specified as a regular expression.</p> <p>Sample Input/Output for the above example:</p> <div class=highlight><pre><span></span><code>I: 234
O: number

I: *
O: operator

I: 2+3
O: number operator number
</code></pre></div> <p>LEX obtains the regular expressions of the symbols 'number' and 'op' from the declarations section and generates code into a function <em>yylex()</em> in the <em>lex.yy.c</em> file. This function checks the input stream for the first match to one of the patterns specified and executes code in the action part corresponding to the pattern.</p> <h3 id=auxiliary-functions>Auxiliary functions<a class=headerlink href=#auxiliary-functions title="Permanent link">&para;</a></h3> <p>LEX generates C code for the rules specified in the Rules section and places this code into a single function called <em>yylex()</em>. (To be discussed in detail later). In addition to this LEX generated code, the programmer may wish to add his own code to the <em>lex.yy.c</em> file. The auxiliary functions section allows the programmer to achieve this.</p> <p><strong>Example:</strong></p> <div class=highlight><pre><span></span><code><span class=cm>/* Declarations */</span>
<span class=o>%%</span>
<span class=cm>/* Rules */</span>
<span class=o>%%</span>

<span class=kt>int</span><span class=w> </span><span class=n>main</span><span class=p>()</span>
<span class=p>{</span>
<span class=w>    </span><span class=n>yylex</span><span class=p>();</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>The auxiliary declarations and auxiliary functions are copied as such to the lex.yy.c file</p> <p>Once the code is written, <em>lex.yy.c</em> maybe generated using the command <em>lex "filename.l"</em> and compiled as <em>gcc lex.yy.c</em></p> <h2 id=the-yyvariables>The yyvariables<a class=headerlink href=#the-yyvariables title="Permanent link">&para;</a></h2> <p>The following variables are offered by LEX to aid the programmer in designing sophisticated lexical analyzers. These variables are accessible in the LEX program and are automatically declared by LEX in <em>lex.yy.c</em>.</p> <ul> <li><a href=#yyin>yyin</a></li> <li><a href=#yytext>yytext</a></li> <li><a href=#yyleng>yyleng</a></li> </ul> <h3 id=yyin><code>yyin</code><a class=headerlink href=#yyin title="Permanent link">&para;</a></h3> <p><em>yyin</em> is a variable of the type FILE* and points to the input file. <em>yyin</em> is defined by LEX automatically. If the programmer assigns an input file to <em>yyin</em> in the auxiliary functions section, then <em>yyin</em> is set to point to that file. Otherwise LEX assigns <em>yyin</em> to stdin(console input).</p> <p><strong>Example:</strong></p> <div class=highlight><pre><span></span><code><span class=cm>/* Declarations */</span>
<span class=o>%%</span>
<span class=w>    </span><span class=cm>/* Rules */</span>
<span class=o>%%</span>

<span class=n>main</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>argc</span><span class=p>,</span><span class=w> </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>argv</span><span class=p>[])</span>
<span class=p>{</span>
<span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>argc</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1</span><span class=p>)</span>
<span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=n>fp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span><span class=w> </span><span class=s>&quot;r&quot;</span><span class=p>);</span>
<span class=w>  </span><span class=k>if</span><span class=p>(</span><span class=n>fp</span><span class=p>)</span>
<span class=w>   </span><span class=n>yyin</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fp</span><span class=p>;</span>
<span class=w> </span><span class=p>}</span>
<span class=w> </span><span class=n>yylex</span><span class=p>();</span>
<span class=w> </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p><strong>Excercise:</strong></p> <div class="admonition question"> <p class=admonition-title>Exercise</p> <p>In the generated <em>lex.yy.c</em> file, the following code segment can be found under the definition of <em>yylex()</em>.</p> <div class=highlight><pre><span></span><code><span class=k>if</span><span class=p>(</span><span class=w> </span><span class=o>!</span><span class=w> </span><span class=n>yyin</span><span class=w> </span><span class=p>)</span>
<span class=n>yyin</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stdin</span><span class=p>;</span>
</code></pre></div> <p>Try to locate this code segment in the file <em>lex.yy.c</em>. What could be the consequences of removing this code segment from <em>lex.yy.c</em> before compiling it for generating the lexical analyzer? The above statement indicates that if the programmer does not define yyin, then yylex() by default sets <em>yyin</em> to the console input. Hence, any re-definition for <em>yyin</em> must be made before invoking <em>yylex()</em>. (This will be explained in detail later).</p> </div> <h3 id=yytext><code>yytext</code><a class=headerlink href=#yytext title="Permanent link">&para;</a></h3> <p><em>yytext</em> is of type <em>char*</em> and it contains the <em>lexeme</em> currently found. A <strong>lexeme</strong> is a sequence of characters in the input stream that matches some pattern in the Rules Section. (In fact, it is the first matching sequence in the input from the position pointed to by <em>yyin</em>.) Each invocation of the function <em>yylex()</em> results in <em>yytext</em> carrying a pointer to the lexeme found in the input stream by <em>yylex()</em>. The value of yytext will be overwritten after the next <em>yylex()</em> invocation.</p> <p><strong>Example:</strong></p> <div class=highlight><pre><span></span><code><span class=o>%</span><span class=n>option</span><span class=w> </span><span class=n>noyywrap</span>
<span class=o>%</span><span class=p>{</span>
<span class=w> </span><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdlib.h&gt;</span>
<span class=w> </span><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
<span class=o>%</span><span class=p>}</span>

<span class=n>number</span><span class=w> </span><span class=p>[</span><span class=mi>0-9</span><span class=p>]</span><span class=o>+</span>

<span class=o>%%</span>

<span class=p>{</span><span class=n>number</span><span class=p>}</span><span class=w> </span><span class=p>{</span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;Found : %d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=n>atoi</span><span class=p>(</span><span class=n>yytext</span><span class=p>));}</span>

<span class=o>%%</span>

<span class=kt>int</span><span class=w> </span><span class=n>main</span><span class=p>()</span>
<span class=p>{</span>
<span class=w> </span><span class=n>yylex</span><span class=p>();</span>
<span class=w> </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>In the above example, if a lexeme is found for the pattern defined by number then corresponding action is executed . Consider the following sample i/o,</p> <p>Sample Input/Output:</p> <div class=highlight><pre><span></span><code>I: 25
O: Found : 25
</code></pre></div> <p>In this case when <em>yylex()</em> is called, the input is read from the location given by <em>yyin</em> and a string “25” is found as a match to 'number'. This location of this string in the memory is pointed to by <em>yytext</em>. The corresponding action in the above rule uses a built-in function <em>atoi()</em> to convert the string “25” (of type char*) to the integer 25 (of the type int) and then prints the result on the screen. Note that the header file “stdlib.h” is called in the auxiliary declarations section in order to invoke <em>atoi()</em> in the actions part of the rule.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The lexeme found by LEX is stored in some memory allocated by LEX which can be accessed through the character pointer yytext.</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The <em>%option noyywrap</em> is used to inform the compiler that the function <em>yywrap()</em> has not been defined. We will see what this function does later on.</p> </div> <div class="admonition question"> <p class=admonition-title>Exercise</p> <p>Suggest a modification in the above example to check whether a number found is even or odd.</p> </div> <h3 id=yyleng><code>yyleng</code><a class=headerlink href=#yyleng title="Permanent link">&para;</a></h3> <p><em>yyleng</em> is a variable of the type int and it stores the length of the lexeme pointed to by <em>yytext</em>.</p> <p><strong>Example:</strong></p> <div class=highlight><pre><span></span><code>/* Declarations */
%%
/* Rules */
%%
{number} printf(&quot;Number of digits = %d&quot;,yyleng);
</code></pre></div> <p>Sample Input/Output</p> <div class=highlight><pre><span></span><code>I: 1234
O: Number of digits = 4
</code></pre></div> <h2 id=the-yyfunctions>The yyfunctions<a class=headerlink href=#the-yyfunctions title="Permanent link">&para;</a></h2> <ul> <li><code>yylex()</code></li> <li><code>yywrap()</code></li> </ul> <h3 id=yylex>yylex()<a class=headerlink href=#yylex title="Permanent link">&para;</a></h3> <p><em>yylex()</em> is a function of return type int. LEX automatically defines <em>yylex()</em> in <em>lex.yy.c</em> but does not call it. The programmer must call yylex() in the Auxiliary functions section of the LEX program. LEX generates code for the definition of yylex() according to the rules specified in the Rules section.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>That yylex() need not necessarily be invoked in the Auxiliary Functions Section of LEX program when used with <a href=../yacc/ >YACC</a>.</p> </div> <p><strong>Example:</strong></p> <div class=highlight><pre><span></span><code><span class=cm>/* Declarations */</span>

<span class=o>%%</span>

<span class=p>{</span><span class=n>number</span><span class=p>}</span><span class=w> </span><span class=p>{</span><span class=k>return</span><span class=w> </span><span class=n>atoi</span><span class=p>(</span><span class=n>yytext</span><span class=p>);}</span>

<span class=o>%%</span>

<span class=kt>int</span><span class=w> </span><span class=n>main</span><span class=p>()</span>
<span class=p>{</span>
<span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>yylex</span><span class=p>();</span>
<span class=w> </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;Found: %d&quot;</span><span class=p>,</span><span class=n>num</span><span class=p>);</span>
<span class=w> </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>Sample Input/Output :</p> <div class=highlight><pre><span></span><code>I: 42
O: Found: 42
</code></pre></div> <p>When yylex() is invoked, it reads the input as pointed to by yyin and scans through the input looking for a matching pattern. When the input or a part of the input matches one of the given patterns, yylex() executes the corresponding action associated with the pattern as specified in the Rules section. In the above example, since there is no explicit definition of yyin, the input is taken from the console. If a match is found in the input for the pattern <strong>number</strong>, yylex() executes the corresponding action , i.e. return atoi(yytext). As a result yylex() returns the number matched. The value returned by yylex() is stored in the variable num. The value stored in this variable is then printed on screen using printf().</p> <p>yylex() continues scanning the input till one of the actions corresponding to a matched pattern executes a return statement or till the end of input has been encountered. In case of the above example, yylex() terminates immediately after executing the rule because it consists of a return statement.</p> <p>Note that if none of the actions in the Rules section executes a return statement, yylex() continues scanning for more matching patterns in the input file till the end of the file.</p> <p>In the case of console input, yylex() would wait for more input through the console. The user will have to input ctrl+d in the terminal to terminate yylex(). If yylex() is called more than once, it simply starts scanning from the position in the input file where it had returned in the previous call.</p> <div class="admonition question"> <p class=admonition-title>Exercise</p> <p>What would be the outputs of the lexical analyzer generated by the example LEX programs under section 3.2 and 4.1 for the following input : <div class=highlight><pre><span></span><code>25
32
44
</code></pre></div> Would both the outputs be the same? If not, explain why.</p> </div> <h3 id=yywrap><code>yywrap()</code><a class=headerlink href=#yywrap title="Permanent link">&para;</a></h3> <p>LEX declares the function yywrap() of return-type int in the file <em>lex.yy.c</em> . LEX does not provide any definition for yywrap(). yylex() makes a call to yywrap() when it encounters the end of input. If yywrap() returns zero (indicating <em>false</em>) yylex() assumes there is more input and it continues scanning from the location pointed to by yyin. If yywrap() returns a non-zero value (indicating true), yylex() terminates the scanning process and returns 0 (i.e. “wraps up”). If the programmer wishes to scan more than one input file using the generated lexical analyzer, it can be simply done by setting yyin to a new input file in yywrap() and return 0.</p> <p>As LEX does not define yywrap() in lex.yy.c file but makes a call to it under yylex(), the programmer must define it in the Auxiliary functions section or provide %option noyywrap in the declarations section. This options removes the call to yywrap() in the lex.yy.c file. Note that, it is <strong>mandatory</strong> to either define yywrap() or indicate the absence using the %option feature. If not, LEX will flag an error</p> <p><strong>Example:</strong></p> <div class=highlight><pre><span></span><code><span class=o>%</span><span class=p>{</span>
<span class=w> </span><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span>
<span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=n>file1</span><span class=p>;</span>
<span class=o>%</span><span class=p>}</span>

<span class=o>%%</span>

<span class=p>[</span><span class=mi>0-9</span><span class=p>]</span><span class=o>+</span><span class=w>  </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;number&quot;</span><span class=p>);</span>

<span class=o>%%</span>

<span class=kt>int</span><span class=w> </span><span class=n>yywrap</span><span class=p>()</span>
<span class=p>{</span>
<span class=w>   </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=n>newfile_pointer</span><span class=p>;</span>
<span class=w>   </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=n>file2</span><span class=o>=</span><span class=s>&quot;input_file_2.l&quot;</span><span class=p>;</span>
<span class=w>   </span><span class=n>newfile_pointer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;input_file_2.l&quot;</span><span class=p>,</span><span class=s>&quot;r&quot;</span><span class=p>);</span>
<span class=w>   </span><span class=k>if</span><span class=p>(</span><span class=n>strcmp</span><span class=p>(</span><span class=n>file1</span><span class=p>,</span><span class=n>file2</span><span class=p>)</span><span class=o>!=</span><span class=mi>0</span><span class=p>)</span>
<span class=w>   </span><span class=p>{</span>
<span class=w>    </span><span class=n>file1</span><span class=o>=</span><span class=n>file2</span><span class=p>;</span>
<span class=w>    </span><span class=n>yyin</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>newfile_pointer</span><span class=p>;</span>
<span class=w>      </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>   </span><span class=p>}</span>
<span class=w>   </span><span class=k>else</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>

<span class=kt>int</span><span class=w> </span><span class=n>main</span><span class=p>()</span>
<span class=p>{</span>
<span class=w> </span><span class=n>file1</span><span class=o>=</span><span class=s>&quot;input_file.l&quot;</span><span class=p>;</span>
<span class=w>   </span><span class=n>yyin</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;input_file.l&quot;</span><span class=p>,</span><span class=s>&quot;r&quot;</span><span class=p>);</span>
<span class=w>   </span><span class=n>yylex</span><span class=p>();</span>
<span class=w>   </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>When yylex() finishes scanning the first input file, <code>input_file.l</code> yylex() invokes yywrap(). The above definition of yywrap() sets the input file pointer to input_file_2.l and returns 0 . As a result, the scanner continues scanning in <code>input_file_2.l</code> . When yylex() calls yywrap() on encountering EOF of input_file_2.l, yywrap() returns 1 and thus yylex() ceases scanning.</p> <div class="admonition question"> <p class=admonition-title>Exercise</p> <p>Suggest a modification in the above example LEX program to make the generated lexical analyzer read input</p> <ul> <li>Initially from the console and then from a file input_file.l</li> <li>Initially from a file input_file.l and then from the console</li> <li>Twice from the console</li> </ul> </div> <h2 id=even-oddl-a-complete-lex-program><code>even-odd.l</code> - a complete LEX program<a class=headerlink href=#even-oddl-a-complete-lex-program title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=o>%</span><span class=p>{</span>

<span class=cm>/*</span>
<span class=cm>1.Request input of an even and an odd number</span>
<span class=cm>2.indicate input characteristic : Even/Odd</span>
<span class=cm>3.check for input&#39;s correctness and print result</span>
<span class=cm>*/</span>

<span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdlib.h&gt;</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>

<span class=kt>int</span><span class=w> </span><span class=n>number_1</span><span class=p>;</span>
<span class=kt>int</span><span class=w> </span><span class=n>number_2</span><span class=p>;</span>

<span class=o>%</span><span class=p>}</span>


<span class=n>number_sequence</span><span class=w> </span><span class=p>[</span><span class=mi>0-9</span><span class=p>]</span><span class=o>*</span>

<span class=o>%%</span>

<span class=p>{</span><span class=n>number_sequence</span><span class=p>}[</span><span class=mi>0</span><span class=o>|</span><span class=mi>2</span><span class=o>|</span><span class=mi>4</span><span class=o>|</span><span class=mi>6</span><span class=o>|</span><span class=mi>8</span><span class=p>]</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;Even number [%d]&quot;</span><span class=p>,</span><span class=n>yyleng</span><span class=p>);</span>
<span class=w>                                </span><span class=k>return</span><span class=w> </span><span class=n>atoi</span><span class=p>(</span><span class=n>yytext</span><span class=p>);</span>
<span class=w>                             </span><span class=p>}</span>

<span class=p>{</span><span class=n>number_sequence</span><span class=p>}[</span><span class=mi>1</span><span class=o>|</span><span class=mi>3</span><span class=o>|</span><span class=mi>5</span><span class=o>|</span><span class=mi>7</span><span class=o>|</span><span class=mi>9</span><span class=p>]</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;Odd number [%d]&quot;</span><span class=p>,</span><span class=n>yyleng</span><span class=p>);</span>
<span class=w>                                </span><span class=k>return</span><span class=w> </span><span class=n>atoi</span><span class=p>(</span><span class=n>yytext</span><span class=p>);</span>
<span class=w>                              </span><span class=p>}</span>
<span class=o>%%</span>

<span class=kt>int</span><span class=w> </span><span class=n>yywrap</span><span class=p>()</span>
<span class=p>{</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>

<span class=kt>int</span><span class=w> </span><span class=n>main</span><span class=p>()</span>
<span class=p>{</span>
<span class=w>  </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;</span><span class=se>\n</span><span class=s>Input an even number and an odd number</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>);</span>
<span class=w>  </span><span class=n>number_1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>yylex</span><span class=p>();</span>
<span class=w>  </span><span class=n>number_2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>yylex</span><span class=p>();</span>
<span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>diff</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>number_1</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>number_2</span><span class=p>;</span>
<span class=w>  </span><span class=k>if</span><span class=p>(</span><span class=n>diff</span><span class=o>%</span><span class=mi>2</span><span class=o>!=</span><span class=mi>0</span><span class=p>)</span>
<span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;</span><span class=se>\n</span><span class=s>Your inputs were checked for correctness, </span><span class=se>\n</span><span class=s>Result : Correct</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>);</span>
<span class=w>  </span><span class=k>else</span>
<span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;</span><span class=se>\n</span><span class=s>Your inputs were checked for correctness, </span><span class=se>\n</span><span class=s>Result : Incorrect</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>);</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <h2 id=disambiguation-rules>Disambiguation Rules<a class=headerlink href=#disambiguation-rules title="Permanent link">&para;</a></h2> <p>yylex() uses two important disambiguation rules in selecting the right action to execute in case there is more than one pattern that matches a string in the given input:</p> <ol> <li>Choose the first match.</li> <li>"Longest match" is preferred.</li> </ol> <p><strong>Example:</strong></p> <div class=highlight><pre><span></span><code><span class=err>“</span><span class=k>break</span><span class=err>”</span><span class=w>   </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>BREAK</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
<span class=p>[</span><span class=n>a</span><span class=o>-</span><span class=n>zA</span><span class=o>-</span><span class=n>Z</span><span class=p>][</span><span class=n>a</span><span class=o>-</span><span class=n>zA</span><span class=o>-</span><span class=n>Z0</span><span class=mi>-9</span><span class=p>]</span><span class=o>*</span><span class=w>   </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>IDENTIFIER</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
</code></pre></div> <p>If "break" is found in the input, it is matched with the first pattern and yylex() returns BREAK. If "breakdown" is found, it is matched with the second pattern and yylex() returns IDENTIFIER. Note the use of disambiguation rules here.</p> <p><strong>Example:</strong></p> <div class=highlight><pre><span></span><code><span class=cm>/* Declarations section */</span>
<span class=o>%%</span>

<span class=err>“</span><span class=o>-</span><span class=err>”</span><span class=w>  </span><span class=p>{</span><span class=k>return</span><span class=w> </span><span class=n>MINUS</span><span class=p>;}</span>
<span class=err>“</span><span class=o>--</span><span class=err>”</span><span class=w> </span><span class=p>{</span><span class=k>return</span><span class=w> </span><span class=n>DECREMENT</span><span class=p>;}</span>

<span class=o>%%</span>
<span class=cm>/* Auxiliary functions */</span>
</code></pre></div> <p>Assume that the function calling yylex() prints the name of the token.</p> <p>Sample Input/Output :</p> <div class=highlight><pre><span></span><code>I: -
O: MINUS
&lt;
I: --
O: DECREMENT

I: ---
O: DECREMENT MINUS
</code></pre></div> <p>Note that, in case of an -- input to the lexical analyzer, yylex() does not return two MINUS tokens, but instead returns a DECREMENT token, by the second disambiguation rule.</p> <h2 id=pattern-matching-using-lex>Pattern matching using LEX<a class=headerlink href=#pattern-matching-using-lex title="Permanent link">&para;</a></h2> <p>Conceptually, LEX constructs a finite state machine to recognize all the regular expression patterns specified in the LEX program file. The code written by the programmer in the action part is executed when the machine is in accept state. The lex.yy.c program stores information about the finite state machine in the form of a decision table (transition table). A transition(current_state,input_char) function is used to access the decision table. LEX makes it's decision table visible if we compile the program with the -T flag. The finite state machine used by LEX is deterministic finite state automaton. The lex.yy.c simulates the DFA.</p> <h2 id=a-token-simulator-program>A token simulator program<a class=headerlink href=#a-token-simulator-program title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=o>%</span><span class=p>{</span>

<span class=cm>/* Scan and return a token for identifiers of the format :</span>

<span class=cm>             string number</span>

<span class=cm>Note: strings are not case sensitive</span>
<span class=cm>Examples: a0 , A1 , ab2 , AB4 , aBc5</span>
<span class=cm>*/</span>

<span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span>

<span class=cp>#define ID 1  </span><span class=c1>//Identifier token</span>
<span class=cp>#define ER 2  </span><span class=c1>//Error token</span>

<span class=o>%</span><span class=p>}</span>

<span class=n>low</span><span class=w>    </span><span class=p>[</span><span class=n>a</span><span class=o>-</span><span class=n>z</span><span class=p>]</span>
<span class=n>upp</span><span class=w>    </span><span class=p>[</span><span class=n>A</span><span class=o>-</span><span class=n>Z</span><span class=p>]</span>
<span class=n>number</span><span class=w> </span><span class=p>[</span><span class=mi>0-9</span><span class=p>]</span>

<span class=o>%</span><span class=n>option</span><span class=w> </span><span class=n>noyywrap</span>

<span class=o>%%</span>

<span class=p>({</span><span class=n>low</span><span class=p>}</span><span class=o>|</span><span class=p>{</span><span class=n>upp</span><span class=p>})({</span><span class=n>low</span><span class=p>}</span><span class=o>|</span><span class=p>{</span><span class=n>upp</span><span class=p>})</span><span class=o>*</span><span class=p>({</span><span class=n>number</span><span class=p>})</span><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=n>ID</span><span class=p>;</span>

<span class=p>(.)</span><span class=o>*</span><span class=w>                                   </span><span class=k>return</span><span class=w> </span><span class=n>ER</span><span class=p>;</span>

<span class=o>%%</span>

<span class=kt>int</span><span class=w> </span><span class=n>main</span><span class=p>()</span>
<span class=p>{</span>
<span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=n>token</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>yylex</span><span class=p>();</span>
<span class=w>  </span><span class=k>if</span><span class=p>(</span><span class=n>token</span><span class=o>==</span><span class=n>ID</span><span class=p>)</span>
<span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;Acceptable</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>);</span>
<span class=w>  </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>token</span><span class=o>==</span><span class=n>ER</span><span class=p>)</span>
<span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;Unacceptable</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>);</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>In this program, the main() function obtains the tokens returned by yylex() and checks if the input contains a valid identifier.</p> <p>Sample Input/Output :</p> <div class=highlight><pre><span></span><code>I: Var9
O: Acceptable
</code></pre></div> <p>When 'Var9' is provided as the input, the DFA constructed by LEX accepts the string, and the corresponding action 'return ID' executed. As a result <em>yylex()</em> returns the token ID, and the <em>main()</em> function prints 'Acceptable' on the screen.</p> <h2 id=construction-of-a-dfa-from-a-regular-expression>Construction of a DFA from a regular expression<a class=headerlink href=#construction-of-a-dfa-from-a-regular-expression title="Permanent link">&para;</a></h2> <p>(This section explains how LEX converts a reqular expression to a finite automaton. An understanding of the contents of this section is not necessary to proceed to the next section.)</p> <p>The construction of a DFA from a regular expression takes place in two steps.</p> <ul> <li>Constructing a syntax tree from the regular expression</li> <li>Converting the syntax tree into a DFA</li> </ul> <h3 id=the-intermediate-syntax-tree>The intermediate syntax tree<a class=headerlink href=#the-intermediate-syntax-tree title="Permanent link">&para;</a></h3> <p>Consider the first rule in the token simulator program in section 8. It consists of the following regular expression :</p> <div class=highlight><pre><span></span><code>({low}|{upp})({low}|{upp})*({number})
</code></pre></div> <p>For convenience in representation , let it be represented by :</p> <div class=highlight><pre><span></span><code>( a | A ) ( a | A )* (N)
</code></pre></div> <p>where, 'a' represents {low}, 'A' represents {upp} and 'N' represents {number}. The syntax tree constructed for the above regular expression would look like :</p> <p><img alt src=../img/lex_5.png></p> <p>In the above figure º represents the 'cat' (concatenation) operator, <code>*</code> represents the 'star' operator (a unary operator) and <code>|</code> represents the 'or' operator. In the syntax tree the inner nodes are operators while the leaves are the operands. The subscript assigned to every leaf is called the <strong>position</strong> of the leaf. The positions have been assigned to the leaves starting from the left-most leaf proceedig towards the right. We are trying to represent the original regular expression with annotated positions. An annotated regular expression in this case:</p> <div class=highlight><pre><span></span><code>( a1 | A2 ) ( a3 | A4 )*(N5)
</code></pre></div> <p>The position of a leaf plays a vital role in the process of constructing states for the DFA because it represents the possible position a token maybe found in the input stream.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Each token may have multiple positions corresponding to it as it can be found in more than one leaves. For example 'a' can be possible found in the input at positions 1 and/or 3.</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>This syntax tree is an intermediate data structure. There will be no traces of this in lex.yy.c file, because it is only used in the construction of the DFA.</p> </div> <h3 id=the-intermediate-syntax-tree_1>The intermediate syntax tree<a class=headerlink href=#the-intermediate-syntax-tree_1 title="Permanent link">&para;</a></h3> <p>Constructing the DFA involves two steps:</p> <ol> <li>Constructing the set of states of the DFA</li> <li>Constructing all the possible transitions made by the DFA from one state to another on different inputs.</li> </ol> <p>The language represented by the regular expression ( a | A ) ( a | A )* (N), can only possibly start with an 'a' or 'A'. From the syntax tree we may infer that these could only correspond to positions 1 or 2 . Let the set of these positions {1,2} be the start state of the DFA. For convenience it has been named as state I.</p> <p>Consider the position 1 (position of 'a'), it could be followed by either of the positions 3,4 or 5 (i.e, it can be followed by 'a','A' or 'N'). Let this be a new state {3,4,5} represented by II. The position 2 ('A') could be possibly followed by either of the positions 3,4 or 5. But a new state is not required as {3,4,5} has already been represented by II. Similarly the positions 3 and 4 could be followed by the position 3 or 4 or 5. If followed by 5, the DFA must accept and terminate (syntax tree ends at position 5). Hence let the final (accept) state be III. Thus, the transitions maybe formulated as :</p> <p><img alt src=../img/lex_3.jpeg></p> <h3 id=the-intermediate-syntax-tree_2>The intermediate syntax tree<a class=headerlink href=#the-intermediate-syntax-tree_2 title="Permanent link">&para;</a></h3> <p>The DFA obtained for the above syntax tree would look like :</p> <p><img alt src=../img/lex_4.png></p> <p>This DFA represents the regular expression provided as a specification (i.e. pattern to be matched) in the first rule of the token simulator program in section 9. When the DFA is in the final state i.e. III, then the corresponding action is executed as instructed in the lex.yy.c file. The constructed DFA is simulated using a simulation algorithm.</p> <h3 id=the-dfa-simulation-algorithm>The DFA simulation algorithm<a class=headerlink href=#the-dfa-simulation-algorithm title="Permanent link">&para;</a></h3> <p>The working of the constructed DFA is simulated using the following algorithm.</p> <div class=highlight><pre><span></span><code><span class=n>DFA_simulator</span><span class=p>()</span>
<span class=w> </span><span class=n>current_state</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>start_state</span>
<span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>get_next_char</span><span class=p>()</span>
<span class=w> </span><span class=k>while</span><span class=p>(</span><span class=n>c</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>EOF</span><span class=p>)</span>
<span class=w>  </span><span class=n>current_sate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>transition</span><span class=p>(</span><span class=n>current_state</span><span class=w> </span><span class=p>,</span><span class=w> </span><span class=n>c</span><span class=p>)</span>
<span class=w>   </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>get_next_char</span><span class=p>()</span>
<span class=w>  </span><span class=k>if</span><span class=p>(</span><span class=n>current_state</span><span class=w> </span><span class=err>∈</span><span class=w> </span><span class=n>Final_states</span><span class=p>)</span>
<span class=w>   </span><span class=cm>/*ACCEPT*/</span>
<span class=w>  </span><span class=k>else</span>
<span class=w>   </span><span class=cm>/*REJECT*/</span>
</code></pre></div> <p>The information about all the transitions made by the DFA can be obtained from the decision table (generally a two dimensional matrix) through the transition() function.</p> <h2 id=using-the-generated-lexical-analyzer>Using the generated lexical analyzer<a class=headerlink href=#using-the-generated-lexical-analyzer title="Permanent link">&para;</a></h2> <p>In this document, we have learned to use LEX to build a lexical analyzer. A lexical analyzer generated by LEX can be used for lexical analysis of ExpL. Lexical analysis is the inital stage of compiling a source language. We will learn more about how to use the lexical analyzer in later stages of the documentation.</p> <div class="admonition question"> <p class=admonition-title>Exercise</p> <ol> <li>Write a lex file<ol> <li>To count the number of lines, words, and characters in the input.</li> <li>To count the number of integers and floating point numbers appearing in the input.</li> <li>To list out all words of length three, starting with "A" to uppercase.</li> <li>To list out all C-like comments (both single line and multi line comments) from a text file.</li> </ol> </li> </ol> </div> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">&para;</a></h2> <p>For further details on the topics covered in this document, the reader may refer to the following :</p> <ol> <li>Compilers : Principles,Techniques and Tools by Alfred V.Aho, Monica S. Lam, Ravi Sethi and Jeffrey D.Ulman .</li> <li>Modern Compiler Implementation in C by Andrew W.Appel</li> <li>Flex &amp; Bison by John Levine</li> <li><a href=http://dinosaur.compilertools.net/ >http://dinosaur.compilertools.net/</a></li> </ol> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> <a href=https://creativecommons.org/licenses/by-nc/4.0/ rel=license> <img alt="Creative Commons License" style=border-width:0 src=https://licensebuttons.net/l/by-nc/4.0/80x15.png> </a> National Insititute of Technology, Calicut </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/silcnitc target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://groups.google.com/g/expl-users target=_blank rel=noopener title=groups.google.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 488 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.tabs", "navigation.top", "navigation.sections"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.fe8b6f2b.min.js></script> </body> </html>