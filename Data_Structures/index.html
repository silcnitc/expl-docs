<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Compiler Lab website for NIT Calicut"><link href=https://silcnitc.github.io/expl-docs/Data_Structures/ rel=canonical><link href=../attribute/ rel=prev><link href=../ex1/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.31"><title>Data Structures for ExpL Compilation/Interpretation - EXPL NIT-C</title><link rel=stylesheet href=../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=purple data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#data-structures-for-expl-compilationinterpretation class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <b>Site is undergoing migration.</b> Old URL: <a href=https://silcnitc.github.io target=_blank target=_blank rel="nofollow noopener">https://silcnitc.github.io</a> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="EXPL NIT-C" class="md-header__button md-logo" aria-label="EXPL NIT-C" data-md-component=logo> <img src=../img/nitc-logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> EXPL NIT-C </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Data Structures for ExpL Compilation/Interpretation </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=purple data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=purple data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../about/philosophy/ class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=../roadmap/ class=md-tabs__link> Roadmap </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../documentation/ class=md-tabs__link> Documentation </a> </li> <li class=md-tabs__item> <a href=../feedback/ class=md-tabs__link> Student Feedback </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="EXPL NIT-C" class="md-nav__button md-logo" aria-label="EXPL NIT-C" data-md-component=logo> <img src=../img/nitc-logo.png alt=logo> </a> EXPL NIT-C </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> About </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../about/philosophy/ class=md-nav__link> <span class=md-ellipsis> Philosophy </span> </a> </li> <li class=md-nav__item> <a href=../about/authors/ class=md-nav__link> <span class=md-ellipsis> Authors </span> </a> </li> <li class=md-nav__item> <a href=../about/license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Roadmap </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Roadmap </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../roadmap/ class=md-nav__link> <span class=md-ellipsis> Roadmap </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-00/ class=md-nav__link> <span class=md-ellipsis> Stage 0 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-01/ class=md-nav__link> <span class=md-ellipsis> Stage 1 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-02/ class=md-nav__link> <span class=md-ellipsis> Stage 2 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-03/ class=md-nav__link> <span class=md-ellipsis> Stage 3 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-04/ class=md-nav__link> <span class=md-ellipsis> Stage 4 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-05/ class=md-nav__link> <span class=md-ellipsis> Stage 5 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-06/ class=md-nav__link> <span class=md-ellipsis> Stage 6 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-07/ class=md-nav__link> <span class=md-ellipsis> Stage 7 </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-08/ class=md-nav__link> <span class=md-ellipsis> Stage 8 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Documentation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../documentation/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class=md-nav__item> <a href=../codegen/ class=md-nav__link> <span class=md-ellipsis> Code Generation </span> </a> </li> <li class=md-nav__item> <a href=../abi/ class=md-nav__link> <span class=md-ellipsis> Application Binary Interface </span> </a> </li> <li class=md-nav__item> <a href=../libinterface/ class=md-nav__link> <span class=md-ellipsis> Library Implementation </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex> <span class=md-ellipsis> ExPL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> ExPL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../expl/ class=md-nav__link> <span class=md-ellipsis> ExpL Specification </span> </a> </li> <li class=md-nav__item> <a href=../grammar-outline/ class=md-nav__link> <span class=md-ellipsis> ExpL Grammar Outline </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_3> <label class=md-nav__link for=__nav_4_5_3 id=__nav_4_5_3_label tabindex=0> <span class=md-ellipsis> Compile Time Data Structures for ExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_3> <span class="md-nav__icon md-icon"></span> Compile Time Data Structures for ExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../data-structures/ class=md-nav__link> <span class=md-ellipsis> Compile Time Data Structures for ExpL </span> </a> </li> <li class=md-nav__item> <a href=../data_structures/abstract-syntax-tree/ class=md-nav__link> <span class=md-ellipsis> Abstract Syntax Tree </span> </a> </li> <li class=md-nav__item> <a href=../data_structures/type-table/ class=md-nav__link> <span class=md-ellipsis> Type Table </span> </a> </li> <li class=md-nav__item> <a href=../data_structures/global-symbol-table/ class=md-nav__link> <span class=md-ellipsis> Global Symbol Table </span> </a> </li> <li class=md-nav__item> <a href=../data_structures/local-symbol-table/ class=md-nav__link> <span class=md-ellipsis> Local Symbol Table </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_4> <label class=md-nav__link for=__nav_4_5_4 id=__nav_4_5_4_label tabindex=0> <span class=md-ellipsis> Run Time Data Structures for ExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_4> <span class="md-nav__icon md-icon"></span> Run Time Data Structures for ExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../run-data-structures/ class=md-nav__link> <span class=md-ellipsis> Run Time Data Structures for ExpL </span> </a> </li> <li class=md-nav__item> <a href=../run_data_structures/heap/ class=md-nav__link> <span class=md-ellipsis> Heap Allocation </span> </a> </li> <li class=md-nav__item> <a href=../run_data_structures/register/ class=md-nav__link> <span class=md-ellipsis> Register Allocation </span> </a> </li> <li class=md-nav__item> <a href=../run_data_structures/run-time-stack/ class=md-nav__link> <span class=md-ellipsis> Stack Allocation </span> </a> </li> <li class=md-nav__item> <a href=../run_data_structures/static-allocation/ class=md-nav__link> <span class=md-ellipsis> Static Allocation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_5> <label class=md-nav__link for=__nav_4_5_5 id=__nav_4_5_5_label tabindex=0> <span class=md-ellipsis> ExPL Test Programs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_5> <span class="md-nav__icon md-icon"></span> ExPL Test Programs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../testprograms/ class=md-nav__link> <span class=md-ellipsis> Test Programs </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-01/ class=md-nav__link> <span class=md-ellipsis> Program 1 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-02/ class=md-nav__link> <span class=md-ellipsis> Program 2 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-03/ class=md-nav__link> <span class=md-ellipsis> Program 3 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-04/ class=md-nav__link> <span class=md-ellipsis> Program 4 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-05/ class=md-nav__link> <span class=md-ellipsis> Program 5 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-06/ class=md-nav__link> <span class=md-ellipsis> Program 6 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-07/ class=md-nav__link> <span class=md-ellipsis> Program 7 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-08/ class=md-nav__link> <span class=md-ellipsis> Program 8 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-09/ class=md-nav__link> <span class=md-ellipsis> Program 9 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-10/ class=md-nav__link> <span class=md-ellipsis> Program 10 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-11/ class=md-nav__link> <span class=md-ellipsis> Program 11 </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/test-program-12/ class=md-nav__link> <span class=md-ellipsis> Program 12 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5_5_14> <label class=md-nav__link for=__nav_4_5_5_14 id=__nav_4_5_5_14_label tabindex=0> <span class=md-ellipsis> Stage 4 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_5_5_14_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5_5_14> <span class="md-nav__icon md-icon"></span> Stage 4 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../testprograms/stage4/bubblesort/ class=md-nav__link> <span class=md-ellipsis> Bubble Sort </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/stage4/fibaofn/ class=md-nav__link> <span class=md-ellipsis> Fibonacci </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/stage4/prime/ class=md-nav__link> <span class=md-ellipsis> Prime </span> </a> </li> <li class=md-nav__item> <a href=../testprograms/stage4/sum-to-n-fact/ class=md-nav__link> <span class=md-ellipsis> Sum to n! </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6 id=__nav_4_6_label tabindex> <span class=md-ellipsis> OExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> OExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../oexpl-specification/ class=md-nav__link> <span class=md-ellipsis> OExpL Specification </span> </a> </li> <li class=md-nav__item> <a href=../oexpl-grammar-outline/ class=md-nav__link> <span class=md-ellipsis> OExpL Grammar Outline </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6_3> <label class=md-nav__link for=__nav_4_6_3 id=__nav_4_6_3_label tabindex=0> <span class=md-ellipsis> Compile Time Data Structures for OExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6_3> <span class="md-nav__icon md-icon"></span> Compile Time Data Structures for OExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../oexpl-data-structures/ class=md-nav__link> <span class=md-ellipsis> Compile Time Data Structures for OExpL </span> </a> </li> <li class=md-nav__item> <a href=../oexpl_data_structures/class-table/ class=md-nav__link> <span class=md-ellipsis> Class Table </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6_4> <label class=md-nav__link for=__nav_4_6_4 id=__nav_4_6_4_label tabindex=0> <span class=md-ellipsis> Run Time Data Structures for OExpL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6_4> <span class="md-nav__icon md-icon"></span> Run Time Data Structures for OExpL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../oexpl-run-data-structures/ class=md-nav__link> <span class=md-ellipsis> Run Time Data Structures for OExpL </span> </a> </li> <li class=md-nav__item> <a href=../oexpl_runtime_data_structures/virtual_function_table/ class=md-nav__link> <span class=md-ellipsis> Virtual Function Table </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../oexpl-runtime-binding-tutorial/ class=md-nav__link> <span class=md-ellipsis> OExPL Runtime Binding </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6_6> <label class=md-nav__link for=__nav_4_6_6 id=__nav_4_6_6_label tabindex=0> <span class=md-ellipsis> OExPL Test Programs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_6_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6_6> <span class="md-nav__icon md-icon"></span> OExPL Test Programs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../oexpl-testprograms/ class=md-nav__link> <span class=md-ellipsis> OExPL Test Programs </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test1/ class=md-nav__link> <span class=md-ellipsis> Program 1 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test2/ class=md-nav__link> <span class=md-ellipsis> Program 2 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test3/ class=md-nav__link> <span class=md-ellipsis> Program 3 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test4/ class=md-nav__link> <span class=md-ellipsis> Program 4 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test5/ class=md-nav__link> <span class=md-ellipsis> Program 5 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test6/ class=md-nav__link> <span class=md-ellipsis> Program 6 </span> </a> </li> <li class=md-nav__item> <a href=../oexpltestprograms/test7/ class=md-nav__link> <span class=md-ellipsis> Program 7 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_7 checked> <label class=md-nav__link for=__nav_4_7 id=__nav_4_7_label tabindex> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_7_label aria-expanded=true> <label class=md-nav__title for=__nav_4_7> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../lex/ class=md-nav__link> <span class=md-ellipsis> Using LEX </span> </a> </li> <li class=md-nav__item> <a href=../yacc/ class=md-nav__link> <span class=md-ellipsis> Using YACC </span> </a> </li> <li class=md-nav__item> <a href=../ywl/ class=md-nav__link> <span class=md-ellipsis> Using YACC with LEX </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_7_4> <label class=md-nav__link for=__nav_4_7_4 id=__nav_4_7_4_label tabindex=0> <span class=md-ellipsis> GDB </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_7_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_7_4> <span class="md-nav__icon md-icon"></span> GDB </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../gdb/ class=md-nav__link> <span class=md-ellipsis> Using GDB </span> </a> </li> <li class=md-nav__item> <a href=../gdb-files/ class=md-nav__link> <span class=md-ellipsis> GDB Input Files </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../label-translation/ class=md-nav__link> <span class=md-ellipsis> Label Translation </span> </a> </li> <li class=md-nav__item> <a href=../install/ class=md-nav__link> <span class=md-ellipsis> XSM Simulator Installation </span> </a> </li> <li class=md-nav__item> <a href=../xsmusagespec/ class=md-nav__link> <span class=md-ellipsis> XSM Simulator Instructions </span> </a> </li> <li class=md-nav__item> <a href=../xsm-environment-tut/ class=md-nav__link> <span class=md-ellipsis> XSM Environment Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../library-implementation/ class=md-nav__link> <span class=md-ellipsis> Library Implementation </span> </a> </li> <li class=md-nav__item> <a href=../attribute/ class=md-nav__link> <span class=md-ellipsis> Attribute Synthesis </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Data Structures for ExpL Compilation/Interpretation </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Data Structures for ExpL Compilation/Interpretation </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> INTRODUCTION </span> </a> </li> <li class=md-nav__item> <a href=#data-structures-for-analysis-phase class=md-nav__link> <span class=md-ellipsis> DATA STRUCTURES FOR ANALYSIS PHASE </span> </a> <nav class=md-nav aria-label="DATA STRUCTURES FOR ANALYSIS PHASE"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#type-table class=md-nav__link> <span class=md-ellipsis> Type Table </span> </a> <nav class=md-nav aria-label="Type Table"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#structure class=md-nav__link> <span class=md-ellipsis> Structure </span> </a> </li> <li class=md-nav__item> <a href=#associated-methods class=md-nav__link> <span class=md-ellipsis> Associated Methods </span> </a> </li> <li class=md-nav__item> <a href=#illustration class=md-nav__link> <span class=md-ellipsis> Illustration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#symbol-tables class=md-nav__link> <span class=md-ellipsis> Symbol Tables </span> </a> <nav class=md-nav aria-label="Symbol Tables"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#global-symbol-table class=md-nav__link> <span class=md-ellipsis> Global Symbol Table </span> </a> <nav class=md-nav aria-label="Global Symbol Table"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#structure_1 class=md-nav__link> <span class=md-ellipsis> Structure </span> </a> </li> <li class=md-nav__item> <a href=#associated-methods_1 class=md-nav__link> <span class=md-ellipsis> Associated Methods </span> </a> </li> <li class=md-nav__item> <a href=#illustration_1 class=md-nav__link> <span class=md-ellipsis> Illustration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#local-symbol-table class=md-nav__link> <span class=md-ellipsis> Local Symbol Table </span> </a> <nav class=md-nav aria-label="Local Symbol Table"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#structure_2 class=md-nav__link> <span class=md-ellipsis> Structure </span> </a> </li> <li class=md-nav__item> <a href=#associated-methods_2 class=md-nav__link> <span class=md-ellipsis> Associated methods </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#abstract-syntax-tree class=md-nav__link> <span class=md-ellipsis> Abstract Syntax Tree </span> </a> <nav class=md-nav aria-label="Abstract Syntax Tree"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#associated-methods_3 class=md-nav__link> <span class=md-ellipsis> Associated methods </span> </a> </li> <li class=md-nav__item> <a href=#illustration_2 class=md-nav__link> <span class=md-ellipsis> Illustration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#data-structures-for-execution-phase class=md-nav__link> <span class=md-ellipsis> DATA STRUCTURES FOR EXECUTION PHASE </span> </a> <nav class=md-nav aria-label="DATA STRUCTURES FOR EXECUTION PHASE"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-storage-allocation-problem class=md-nav__link> <span class=md-ellipsis> The storage allocation Problem </span> </a> </li> <li class=md-nav__item> <a href=#the-memory-model class=md-nav__link> <span class=md-ellipsis> The memory model </span> </a> </li> <li class=md-nav__item> <a href=#register-allocation class=md-nav__link> <span class=md-ellipsis> Register Allocation </span> </a> </li> <li class=md-nav__item> <a href=#static-allocation class=md-nav__link> <span class=md-ellipsis> Static Allocation </span> </a> </li> <li class=md-nav__item> <a href=#run-time-stack-allocation class=md-nav__link> <span class=md-ellipsis> Run Time Stack Allocation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#stack class=md-nav__link> <span class=md-ellipsis> Stack </span> </a> <nav class=md-nav aria-label=Stack> <ul class=md-nav__list> <li class=md-nav__item> <a href=#structure_3 class=md-nav__link> <span class=md-ellipsis> Structure </span> </a> </li> <li class=md-nav__item> <a href=#associated-methods_4 class=md-nav__link> <span class=md-ellipsis> Associated methods </span> </a> </li> <li class=md-nav__item> <a href=#heap-allocation class=md-nav__link> <span class=md-ellipsis> Heap Allocation </span> </a> <nav class=md-nav aria-label="Heap Allocation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#associated-methods_5 class=md-nav__link> <span class=md-ellipsis> Associated methods </span> </a> </li> <li class=md-nav__item> <a href=#allocation-algorithms class=md-nav__link> <span class=md-ellipsis> Allocation algorithms </span> </a> </li> <li class=md-nav__item> <a href=#fixed-memory-allocation class=md-nav__link> <span class=md-ellipsis> Fixed Memory Allocation </span> </a> </li> <li class=md-nav__item> <a href=#illustration_3 class=md-nav__link> <span class=md-ellipsis> Illustration </span> </a> </li> <li class=md-nav__item> <a href=#buddy-memory-allocation class=md-nav__link> <span class=md-ellipsis> Buddy Memory Allocation </span> </a> </li> <li class=md-nav__item> <a href=#illustration_4 class=md-nav__link> <span class=md-ellipsis> Illustration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_8> <label class=md-nav__link for=__nav_4_8 id=__nav_4_8_label tabindex> <span class=md-ellipsis> Misc </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_8_label aria-expanded=false> <label class=md-nav__title for=__nav_4_8> <span class="md-nav__icon md-icon"></span> Misc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ex1/ class=md-nav__link> <span class=md-ellipsis> Exercise 1 </span> </a> </li> <li class=md-nav__item> <a href=../explusagespec/ class=md-nav__link> <span class=md-ellipsis> ExPL Usage spec? </span> </a> </li> <li class=md-nav__item> <a href=../libinterfaceexpl/ class=md-nav__link> <span class=md-ellipsis> ExPL Library Interface? </span> </a> </li> <li class=md-nav__item> <a href=../help/ class=md-nav__link> <span class=md-ellipsis> help </span> </a> </li> <li class=md-nav__item> <a href=../oexpl/ class=md-nav__link> <span class=md-ellipsis> OExPL </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Student Feedback </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Student Feedback </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../feedback/ class=md-nav__link> <span class=md-ellipsis> Student Feedback </span> </a> </li> <li class=md-nav__item> <a href=../feedback/nitc-winter-2021/ class=md-nav__link> <span class=md-ellipsis> NIT-C Winter 2021 </span> </a> </li> <li class=md-nav__item> <a href=../feedback/nitc-winter-2017/ class=md-nav__link> <span class=md-ellipsis> NIT-C Winter 2017 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> INTRODUCTION </span> </a> </li> <li class=md-nav__item> <a href=#data-structures-for-analysis-phase class=md-nav__link> <span class=md-ellipsis> DATA STRUCTURES FOR ANALYSIS PHASE </span> </a> <nav class=md-nav aria-label="DATA STRUCTURES FOR ANALYSIS PHASE"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#type-table class=md-nav__link> <span class=md-ellipsis> Type Table </span> </a> <nav class=md-nav aria-label="Type Table"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#structure class=md-nav__link> <span class=md-ellipsis> Structure </span> </a> </li> <li class=md-nav__item> <a href=#associated-methods class=md-nav__link> <span class=md-ellipsis> Associated Methods </span> </a> </li> <li class=md-nav__item> <a href=#illustration class=md-nav__link> <span class=md-ellipsis> Illustration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#symbol-tables class=md-nav__link> <span class=md-ellipsis> Symbol Tables </span> </a> <nav class=md-nav aria-label="Symbol Tables"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#global-symbol-table class=md-nav__link> <span class=md-ellipsis> Global Symbol Table </span> </a> <nav class=md-nav aria-label="Global Symbol Table"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#structure_1 class=md-nav__link> <span class=md-ellipsis> Structure </span> </a> </li> <li class=md-nav__item> <a href=#associated-methods_1 class=md-nav__link> <span class=md-ellipsis> Associated Methods </span> </a> </li> <li class=md-nav__item> <a href=#illustration_1 class=md-nav__link> <span class=md-ellipsis> Illustration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#local-symbol-table class=md-nav__link> <span class=md-ellipsis> Local Symbol Table </span> </a> <nav class=md-nav aria-label="Local Symbol Table"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#structure_2 class=md-nav__link> <span class=md-ellipsis> Structure </span> </a> </li> <li class=md-nav__item> <a href=#associated-methods_2 class=md-nav__link> <span class=md-ellipsis> Associated methods </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#abstract-syntax-tree class=md-nav__link> <span class=md-ellipsis> Abstract Syntax Tree </span> </a> <nav class=md-nav aria-label="Abstract Syntax Tree"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#associated-methods_3 class=md-nav__link> <span class=md-ellipsis> Associated methods </span> </a> </li> <li class=md-nav__item> <a href=#illustration_2 class=md-nav__link> <span class=md-ellipsis> Illustration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#data-structures-for-execution-phase class=md-nav__link> <span class=md-ellipsis> DATA STRUCTURES FOR EXECUTION PHASE </span> </a> <nav class=md-nav aria-label="DATA STRUCTURES FOR EXECUTION PHASE"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-storage-allocation-problem class=md-nav__link> <span class=md-ellipsis> The storage allocation Problem </span> </a> </li> <li class=md-nav__item> <a href=#the-memory-model class=md-nav__link> <span class=md-ellipsis> The memory model </span> </a> </li> <li class=md-nav__item> <a href=#register-allocation class=md-nav__link> <span class=md-ellipsis> Register Allocation </span> </a> </li> <li class=md-nav__item> <a href=#static-allocation class=md-nav__link> <span class=md-ellipsis> Static Allocation </span> </a> </li> <li class=md-nav__item> <a href=#run-time-stack-allocation class=md-nav__link> <span class=md-ellipsis> Run Time Stack Allocation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#stack class=md-nav__link> <span class=md-ellipsis> Stack </span> </a> <nav class=md-nav aria-label=Stack> <ul class=md-nav__list> <li class=md-nav__item> <a href=#structure_3 class=md-nav__link> <span class=md-ellipsis> Structure </span> </a> </li> <li class=md-nav__item> <a href=#associated-methods_4 class=md-nav__link> <span class=md-ellipsis> Associated methods </span> </a> </li> <li class=md-nav__item> <a href=#heap-allocation class=md-nav__link> <span class=md-ellipsis> Heap Allocation </span> </a> <nav class=md-nav aria-label="Heap Allocation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#associated-methods_5 class=md-nav__link> <span class=md-ellipsis> Associated methods </span> </a> </li> <li class=md-nav__item> <a href=#allocation-algorithms class=md-nav__link> <span class=md-ellipsis> Allocation algorithms </span> </a> </li> <li class=md-nav__item> <a href=#fixed-memory-allocation class=md-nav__link> <span class=md-ellipsis> Fixed Memory Allocation </span> </a> </li> <li class=md-nav__item> <a href=#illustration_3 class=md-nav__link> <span class=md-ellipsis> Illustration </span> </a> </li> <li class=md-nav__item> <a href=#buddy-memory-allocation class=md-nav__link> <span class=md-ellipsis> Buddy Memory Allocation </span> </a> </li> <li class=md-nav__item> <a href=#illustration_4 class=md-nav__link> <span class=md-ellipsis> Illustration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=data-structures-for-expl-compilationinterpretation>Data Structures for ExpL Compilation/Interpretation<a class=headerlink href=#data-structures-for-expl-compilationinterpretation title="Permanent link">&para;</a></h1> <h2 id=introduction>INTRODUCTION<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p>The compilation/interpretation of an ExpL program involves two phases. In the first phase (called the <strong>analysis phase</strong>), the source ExpL program is analyzed (lexical, syntax and semantic analysis are completed in this phase) and if the program is free of syntax and semantic errors, an intermediate representation of the source program called the <strong>abstract syntax tree</strong> is generated.</p> <p>This is followed by a second phase, whose functionality is different for a compiler and an interpreter.</p> <p>In the case of a compiler, the second phase (called the <strong>synthesis phase</strong>) recursively traverses the abstract syntax tree and generates target code.</p> <p>[<strong>Note</strong>: the abstract syntax tree representation is only one among several intermediete representations used in practical compilers. “Lower level” intermediete representations like three address code are often more useful for applying code optimization algorithms. In our present experiment, we do not perform any code optimizations and hence the code generation phase will directly work with the abstract syntax tree.]</p> <p>In the case of interpretation, the second phase (called the execution phase) involves direct execution of the program by recursive evaluation of the abstract syntax tree.</p> <p><em>The description of data structures below assumes an interpreter is being designed</em>. This choice has been made to avoid target machine dependency in the documentation.  Notes/comments  are added wherever appropriate explaining the modifications to be made to the data structures to implement a compiler.</p> <p>There are three basic data structures that are maintained during the analysis phase. These are the following:</p> <ol> <li>The <strong>global symbol table</strong> is used to store information about the global variables and functions in the program.</li> <li>For each function, a separate <strong>local symbol table</strong> is maintained to store the information about local variables and arguements of the function.</li> <li>Finally, the <strong>abstract syntax tree</strong> that is constructed as the outcome of the analysis phase is the third data structure.</li> </ol> <p>An abstract syntax tree is a tree representation of a program. It is a generalization of the tree representation for expressions (called the expression tree). For example, the arithmetic expression (3+5)*(5+9) is typically represented as an expression tree as below:</p> <p><img alt src=../img/data_structure_28.png></p> <p>We can generalize this representation to come up with a tree representation for the whole sequence of statements of a ExpL function in a program. Each funcion in an ExpL program will be represented by an abstract syntax tree. Thus, the whole program will be a collection of abstract syntax trees, one for each function.</p> <p>In the following, the definitions node structures for each of the above data structures is discussed. The organization of data in these data structures is also discussed with illustrative examples.</p> <h2 id=data-structures-for-analysis-phase>DATA STRUCTURES FOR ANALYSIS PHASE<a class=headerlink href=#data-structures-for-analysis-phase title="Permanent link">&para;</a></h2> <h3 id=type-table>Type Table<a class=headerlink href=#type-table title="Permanent link">&para;</a></h3> <p>The Type Table stores all the necessary information regarding the various user defined types in the source program. The compiler creates an entry in the Type Table for each user defined type. In addition to this, there are default entries created for primitive types (<em>int</em>, <em>str</em>) and special entries <em>null</em>, <em>boolean</em> and <em>void</em> for the internal purposes of the interpreter. The default and special entries are made beforehand whereas entries for user defined types are made as the Type Declaration Section of the source code is parsed.</p> <h4 id=structure>Structure<a class=headerlink href=#structure title="Permanent link">&para;</a></h4> <p>The structure of Type Table is as follows:</p> <p>The variable 'fields' is a pointer to the head of 'fieldlist'. Here 'fieldlist' stores the information regarding the different fields in the case of a user-defined type.</p> <h4 id=associated-methods>Associated Methods<a class=headerlink href=#associated-methods title="Permanent link">&para;</a></h4> <ul> <li>void TypeTableCreate() : Function to initialise the type table entries with primitive types <em>(int,str)</em> and internal data types <em>(boolean,null,void)</em>.</li> <li>struct Typetable* TLookup(char *name) : Search through the type table and return pointer to type table entry of type 'name'.</li> <li>struct Typetable* TInstall(char *name, struct Fieldlist *fields) : Creates a type table entry for the type of 'name' with given 'fields' and returns the pointer to the type table entry.</li> <li>void FInstall(char *name, struct Typetable *type) : Adds a fieldlist entry with given 'name' and 'type'.</li> <li>struct Fieldlist* FLookup(char *name, struct Fieldlist *list) : Searches for a field of given 'name' in the given 'fieldlist' (of some user-defined type) and returns a pointer to the matching entry.</li> </ul> <h4 id=illustration>Illustration<a class=headerlink href=#illustration title="Permanent link">&para;</a></h4> <p>Let us consider the following sample code:</p> <ol> <li> <p>The type table is first created and initialised to contain the default entries for each of the primitive and internal datatypes. This is done through a call to the function TypeTableCreate() from main function before yyparse() is called to start parsing the code. After the execution of TypeTableCreate() , the type table will be as follows: </p> <p><img alt src=../img/data_structure_1.png></p> </li> <li> <p>As soon as the compiler encounters the declaration of a user defined type, it is installed into the type table. Subsequently the fields are attached to this type table entry. For instance, in the case of the user-defined type <em>linkedlist</em>, as soon as the name <em>linkedlist</em> is encountered, a type table entry with 'name' set to <em>linkedlist</em> and 'fields' set to <em>NULL</em> is created. Later, on finishing the complete parse of the type definition, the fieldlist is created and it is attached to the type table entry.<br> <strong>NOTE</strong> : A type table entry is created as soon as the type name is seen. This is because a field of the type may be of same type (For example, just like <em>next</em> is of type <em>linkedlist</em> in the type definition of <em>linkedlist</em>). When the 'fieldlist' is created, the type of the field is set by looking up the type table. </p> <p><img alt src=../img/data_structure_2.png></p> </li> <li> <p>Similar actions are carried out for user-defined type <em>marklist</em> also. </p> <p><img alt src=../img/data_structure_3.png></p> </li> <li> <p>Once the type declaration section is completely parsed, the type table is fully created and will not be further modified or updated.</p> </li> </ol> <h3 id=symbol-tables>Symbol Tables<a class=headerlink href=#symbol-tables title="Permanent link">&para;</a></h3> <p>Symbol tables are used to store information pertaining to the variables and functions in a program.</p> <h4 id=global-symbol-table>Global Symbol Table<a class=headerlink href=#global-symbol-table title="Permanent link">&para;</a></h4> <p>The global symbol table stores information pertaining to all the global variables and functions in an ExpL program.</p> <h6 id=structure_1>Structure<a class=headerlink href=#structure_1 title="Permanent link">&para;</a></h6> <p>The structure of Global Symbol Table(GST) is as follows:</p> <p>✛<strong>NOTE</strong>: In the case of a compiler, fbinding must store the starting address of the function's code in memory. A call to the function must translate into an assembly level call to the function's code in memory. Hence, in this case fbining has to be an integer storing a memory address.</p> <p>Arglist is used to store information regarding the types and names of the arguements. ArgStruct has the following structure.</p> <p>Read about ASTNode <a href=#abstract-syntax-tree>here</a>.</p> <h6 id=associated-methods_1>Associated Methods<a class=headerlink href=#associated-methods_1 title="Permanent link">&para;</a></h6> <ul> <li>struct Gsymbol* GInstall(char *name,struct Typetable *type, int size, struct ArgStruct *arglist) : Creates a Global Symbol object of given 'name', 'type', 'size' and 'argument list' and assigns a 'binding' to the variable.</li> <li>struct Gsymbol* GLookup(char *name) : Search for a GST entry with the given 'name', if exists, return pointer to GST entry else return NULL.</li> </ul> <h6 id=illustration_1>Illustration<a class=headerlink href=#illustration_1 title="Permanent link">&para;</a></h6> <p>Continuing with earlier example, let us add Global declaration section to it.</p> <ol> <li>As soon as the compiler encounters the global declaration of a variable or funtion, it is installed into Global Symbol Table. Subsequently, the arguments are attached to the entry in case of functions. Following is how GST looks when <em>studentname</em> is installed.</li> </ol> <p><img alt src=../img/data_structure_5.png></p> <ol> <li>Similarly for <em>rollno,average,findaverage(linkedlist marks)</em>, symbol table entries are formed and installed. The fbinding for a function is the abstract syntax tree of the function definition and is set only after complete parsing of the function definition. </li> </ol> <p><img alt src=../img/data_structure_6.png></p> <ol> <li>After this, the types for rollno,average and findaverage will be set and these objects are appended to the global symbol table. The final Global Symbol table looks as follows: </li> </ol> <p><img alt src=../img/data_structure_7.png></p> <h4 id=local-symbol-table>Local Symbol Table<a class=headerlink href=#local-symbol-table title="Permanent link">&para;</a></h4> <p>In addition to the global symbol table, the ExpL compiler maintains a separate local symbol table for each function for storing information regarding the functions arguments and local variables. Each function has its own list of local variables. So each function has its own LST.</p> <h6 id=structure_2>Structure<a class=headerlink href=#structure_2 title="Permanent link">&para;</a></h6> <h6 id=associated-methods_2>Associated methods<a class=headerlink href=#associated-methods_2 title="Permanent link">&para;</a></h6> <ul> <li>struct Lsymbol* LInstall(char *name,struct Typetable *type) : Creates a local symbol tbale with given 'name' and 'type' and also sets its 'binding'.</li> <li>struct Lsymbol* LLookup(char *name) : search the LST and if any entry with given 'name' is found ,return the entry,else returns NULL.</li> </ul> <p>Arrays cannot be local variables, so we don't need to store the size of a variables. Also nested functions are not allowed in ExpL, so we don't require fbinding and arglist as in Gsymbol. The LST is formed for the Local Declaration Section in the same way GST was created for the Global declaration section.</p> <p>Memory is allocated for local variables of a function from a seperate memory area called the <a href=#stack>stack</a>. Hence, the binding for a local variable is the relative address of the variable with respect to the base of the [<strong>Activation Record</strong>]. The [<strong>Base Pointer</strong>] points to the base of an activation record of a function. The binding is added to the Base Pointer to obtain the address of variable in stack. This will be explained in detail later.</p> <h3 id=abstract-syntax-tree>Abstract Syntax Tree<a class=headerlink href=#abstract-syntax-tree title="Permanent link">&para;</a></h3> <p>The machine independent <strong>front-end</strong> phase of a compiler constructs an intermediate representation of the source program called the <strong>Abstract Syntax Tree (AST)</strong>. An interpretter will evaluate the AST whereas a compiler will run a machine dependent <strong>back-end</strong> to generate a target assembly language program. The following structure may be used to represent a node of the AST.</p> <p>The union Constant is used to store the value of an integer or sting constant.</p> <h6 id=associated-methods_3>Associated methods<a class=headerlink href=#associated-methods_3 title="Permanent link">&para;</a></h6> <ul> <li>struct ASTNode* TreeCreate (<br> struct Typetable *type,<br> int nodetype,<br> char *name,<br> union Constant value,<br> struct ASTNode *arglist,<br> struct ASTNode *ptr1,<br> struct ASTNode *ptr2,<br> struct ASTNode *ptr3<br> )<br> Creates a node with the fields set according to the arguements passed.</li> <li> <p>regindex evaluate(struct ASTNode *t)<br> Evaluation of an AST node results in a value. A compiler generates code for evaluating an AST node and assigns the result of evaluation to a register. An interpreter directly evaluates the AST node and simulates the compiler by storing the result in an array (called reg) and returning the index. We make use of the following structure to store the results of evaluation by an interpreter:</p> <p>In 'valstruct' the field 'valtype' can take one of the following values:</p> <ol> <li>EMPTY : Indicates that no value is stored in it.</li> <li>INT : Indicates that value stored in the union constant 'value' is an integer.</li> <li>STR : Indicates the value stored in the union constant 'value' is a string.</li> <li>H_INDEX : Indicates that valstruct stores the (integer) index of a location in the heap.</li> </ol> </li> </ul> <p>Follwing are the nodetypes that may appear while contructing the abstract syntax free for ExpL program:</p> <p>Nodetype</p> <p>Description</p> <p>LEAF</p> <p>For interger and string constants.</p> <p>ID</p> <p>For all variable literals.</p> <p>PLUS</p> <p>For arithmetic operator '+'.<br> Attributes 'ptr1' and 'ptr2' of the 'ASTNode' are set to AST of left and right operands respectively and must be of type 'int'.<br> 'ptr3' is set to NULL.</p> <p>MINUS</p> <p>For arithmetic operator '-'.<br> Attributes 'ptr1' and 'ptr2' of the 'ASTNode' are set to AST of left and right operands respectively and must be of type 'int'.<br> 'ptr3' is set to NULL.</p> <p>MUL</p> <p>For arithmetic operator '*'.<br> Attributes 'ptr1' and 'ptr2' of the 'ASTNode' are set to AST of left and right operands respectively and must be of type 'int'.</p> <p>DIV</p> <p>For arithmetic operator '/'.<br> Attributes 'ptr1' and 'ptr2' of the 'ASTNode' are set to AST of left and right operands respectively and must be of type 'int'.</p> <p>GT</p> <p>For relational operator '&gt;'.<br> Attributes 'ptr1' and 'ptr2' of the 'ASTNode' are set to AST of left and right operands respectively and must be of type 'int'.</p> <p>LT</p> <p>For relational operator '&lt;'.<br> Attributes 'ptr1' and 'ptr2' of the 'ASTNode' are set to AST of left and right operands respectively and must be of type 'int'.</p> <p>GE</p> <p>For relational operatot '&gt;='.<br> Attributes 'ptr1' and 'ptr2' of the 'ASTNode' are set to AST of left and right operands respectively and must be of type 'int'.</p> <p>LE</p> <p>For relational operatot '&lt;='.<br> Attributes 'ptr1' and 'ptr2' of the 'ASTNode' are set to AST of left and right operands respectively and must be of type 'int'.</p> <p>EQ</p> <p>For relational operator '=='.<br> Attricutes 'ptr1' and 'ptr2' of the 'ASTNode' are set to AST of left and right operands respectively and both must be of same type.</p> <p>NE</p> <p>For relational operator '!='.<br> Attricutes 'ptr1' and 'ptr2' of the 'ASTNode' are set to AST of left and right operands respectively and both must be of same type.</p> <p>IF</p> <p>For the conditional contruct 'if'.<br> Attribute 'ptr1' of the 'ASTNode' is set to AST of the conditional logical expression, 'ptr2' is set to AST of list of statements that are executed when conditional expression evaluates to true and 'ptr3' is set to AST of list of statements that are to be executed when conditional expression is evalusted false.</p> <p>WHILE</p> <p>For conditional construct 'while'.<br> Attribute 'ptr1' os 'ASTNode' is set to the conditional logical expression and 'ptr2' is set to AST of list of statements under the while construct.</p> <p>READ</p> <p>For input statement 'read'. Attribute 'ptr1' is set to AST of nodetype ID, which carries the information of the variable for which we are taking the input.</p> <p>WRITE</p> <p>For output statement 'write'. Attibute 'ptr1' is set to AST of the expression, whose value is to be written to the standard output.</p> <p>ASGN</p> <p>For assignment statement (<var> = <expr>).<br> Attribute 'ptr1' is set to AST of nodetype ID or FIELD and 'ptr2' is set to AST of expression whose value will be assigned to lvalue given by 'ptr1'.</p> <p>SLIST</p> <p>To connect statements.</p> <p>BODY</p> <p>For body of a function.</p> <p>RET</p> <p>For return statement of a function.</p> <p>FUNCTION</p> <p>For function calls.</p> <p>PARAM</p> <p>For passing actual parameters during function calls.</p> <p>MAIN</p> <p>For main function.</p> <p>FIELD</p> <p>For user-defined types.</p> <h6 id=illustration_2>Illustration<a class=headerlink href=#illustration_2 title="Permanent link">&para;</a></h6> <p>Consider the following program</p> <p>1. Lets construct the abstract syntax tree step by step. The AST for conditional expression <code>n==1</code> (in line 9) will be as follows:</p> <p><img alt src=../img/data_structure_50.png> </p> <p>2. Similarly we have AST fot <code>n==0</code> (in line 9) as follows.</p> <p><img alt src=../img/data_structure_51.png></p> <p>3. Next consider the complete conditional expression <code>n==1 || n==0</code>.</p> <p><img alt src=../img/data_structure_52.png></p> <p>4.Next we will form the AST for assignment statement <code>f = 1</code> (in line 10).</p> <p><img alt src=../img/data_structure_53.png></p> <p>5. Next, lets consider the statement <code>f = n * factorial(n-1)</code> which consists of arthimetic expressions with operands '-','*' and an assignment statement.</p> <p>AST for <code>n-1</code> is as follows.</p> <p><img alt src=../img/data_structure_54.png></p> <p>AST for <code>n * factorial(n-1)</code> is as follows.</p> <p><img alt src=../img/data_structure_55.png></p> <p>AST for <code>f = n * factorial(n-1)</code> is as below.</p> <p><img alt src=../img/data_structure_56.png></p> <p>6. Following is the AST for the if condition.</p> <p><img alt src=../img/data_structure_57.png></p> <p>7. The AST for return statement is as folows</p> <p><img alt src=../img/data_structure_58.png></p> <p>8. Finally the AST for the factorial function will be as follows.</p> <p><img alt src=../img/data_structure_59.png></p> <h2 id=data-structures-for-execution-phase>DATA STRUCTURES FOR EXECUTION PHASE<a class=headerlink href=#data-structures-for-execution-phase title="Permanent link">&para;</a></h2> <p>Before explaining the data structures used for the execution phase, it is necessary to understand the requirements and the underlying theoretical concepts in some detail.</p> <h3 id=the-storage-allocation-problem>The storage allocation Problem<a class=headerlink href=#the-storage-allocation-problem title="Permanent link">&para;</a></h3> <p>This part of the documentation primarily focuses on program interpretation.  However, our interpreter will be somewhat mimicing the actions of a compiler and hence the reader will be able to easily adapt what is learned here to handle the synthesis phase of compilation by going through this documentation.</p> <p>An interpreter needs to "execute" the abstract syntax tree and hence the interpreter must arrange storage for run time data and subroutine invocations (function calls).</p> <p>A program contains global variables as well as variables that are local to functions, both requiring memory space. Of these, global variables are the simplest to handle because during the analysis phase we know how many global variables are there in the program (all global variables are declared) and how much space needs to be allocated for each of them (why?). Thus, the storage requirements of global variables are completely determined at compile time and they can be assigned memory addresses during the analysis phase itself. Such allocation is called <strong>static allocation</strong>. The binding field of the global symbol table entry for a variable stores a pointer (address) to the memory allocated to the variable. The symbol table information will be used during the execution phase to find out the location in memory where the variable is stored.</p> <p>[In the case of compilation, the memory addresses for each global variable in the target machine is determined during the analysis phase and are stored in the <em>binding</em> field of the symbol table.]</p> <p>As a point aside, the binding field of the symbol table entry for a function is set to hold a <em>pointer to the abstract syntax tree of the function</em>. This helps the evaluation phase to locate the corresponding abstract syntax tree whenever a function call is encountered during the execution phase.</p> <p>[In the case of a compiler, the the analysis phase will decide on the addresses in the <strong>code area</strong> of memory where the function's code is loaded. The address to which a call to the function must be directed to is stored in the binding field of the symbol table.]</p> <p>Variables which are local to functions demands more complicated allocation. This is because a function may be invoked several times and <em>for each invocation, separate storage needs to be allocated for variables defined within the scope of the function</em> (i.e., local variables and arguments).  [Why?] Moreover, we do not know during the analysis phase how many times a function will be invoked during the execution phase.  [Why?]</p> <p>To understand this, consider the factorial program below.</p> <p>The function factorial contains an argument n. Suppose the initial value of n input by the user at run time was 5, then factorial(n) with n=5 is invoked from the main. This function invokes factorial(n) with n=4. However, we need to retain the old value of n since the orginal factorial function must resume execution after the completion of factorial(4). Thus, we cannot statically assign a fixed memory address to the variable n. Instead, for each invocation of the function, we need to create a different memory space for storing the value of n. Moreover, the initial value of n given by the user is not known at compile time. Hence cannot determine at compile time the exact storage requirement. We will have to design the compiler/interpreter to allocate memory space as is necessary during run time.</p> <p>In addition to allocating storage for local variables and arguments, additional storage needs to be allocated at run time for each invocation of a function to store the return values of the call and control information like a pointer to the next instruction in the calling function (return address)].</p> <p>The classical solution to handling function invocation is to maintain a <strong>run time stack</strong>. Whenever a function is invoked during execution, <strong>an activation record</strong> is created in the run time stack with sufficient space for storing local variables, arguments, return values and return address and the stack grows. Upon return from the function, the activation record is popped out of the stack and the activation record of the calling program will be in the top of the stack. Thus, at each point during execution, the activation record of the currently executing function will be on the top of the stack. Such storage allocation is called <strong>stack based run time allocation</strong>.</p> <p>[Note: The semantics of ExpL makes stack based allocation possible. Primarily, this is possible because data stored in an activation record can be forgotten once the execution of the call is finished. There are languages like LISP which permit <a href=https://en.wikipedia.org/wiki/Higher-order_function>higher order functions</a> where a stack based run time allocation is not possible. Languages which permit stack based run time allocation for function invocations are said to follow <strong>stack discipline</strong>.]</p> <p>Observe that for each function defined in an ExpL program, the amount of storage needed in its activation record is known during the analysis phase. [Why?] What is not known is how many activation records will have to be created in the stack as this is known only during execution time.</p> <p>In addition to allocating storage for global variables and variables local to functions, ExpL supports <strong>dynamic memory allocation</strong> through the alloc() function. The alloc() function allows a program to request for memory space at run time. Since the amount of memory requested is not known during the analysis phase (why?), static allocation is not possible in this case. Stack allocation also is ruled out because memory allocated by alloc() inside a function is not de-allocated when the function returns. Hence, a mechanism to dynamically allocate memory on demand at run time is required.</p> <p>The classical solution to this problem is to maintain an contiguous area of memory called the heap memory from which memory is allocated by alloc() on demand. Heap management algorithms like the <strong>fixed size allocator algorithm</strong> and the <strong>buddy system algorithm</strong> are explained in detail later in this documentation.</p> <p>Finally, intermediate values generated during program execution needs <strong>temporary storage</strong>. For example, while evaluating an expression (a+b)*(c+d), the values of the sub-expressions (a+b) and (c+d) might need temporary storage. In a compiler, the <strong>machine registers</strong> are used for temporary storage. Our interpreter will simulate the compiler by having an array of “registers” for storing such temporary values. When a function invokes another function, the registers in current use will be pushed to the stack (activation record of the caller) so that the called function (callee) has the full set of registers free for its use. Upon return from the callee, the values pushed into the stack are restored to the registers before the caller resumes its execution.</p> <p>To summarize, we have four kinds of memory allocation – static, stack, heap and register (temporary). The data structures and algorithms necessary for implementing each of these are discussed below.</p> <h3 id=the-memory-model>The memory model<a class=headerlink href=#the-memory-model title="Permanent link">&para;</a></h3> <p>Our interpreter will simulate machine memory and registers by defining three memory arrays, named <em>stack, heap and registers</em>.</p> <p><img alt src=../img/data_structure_33.png></p> <p>The basic unit of memory (called a <strong>memory word</strong>) is assumed to be able to store an integer or a string. This model is assumed because the primitive data types of ExpL are integer and string. The interpreter therefore defines the following memory structure:</p> <p>The interpreter works with three arrays of memory words, to implement temporary storage (registers), the run time stack and the heap. There will be no sperarate memory array for static data. Instead, the intial part of the stack will be used for storing static data.</p> <h3 id=register-allocation>Register Allocation<a class=headerlink href=#register-allocation title="Permanent link">&para;</a></h3> <p>Register allocation is performed through two simple functions.</p> <ul> <li>int get_register(): Allocates a free register from the register pool reg[16] and returns the index of the register, returns -1 if no free register is available.</li> <li>int free_register(): Frees the last register that was allocated,returns 0 if success, returns -1 if the function is called with none of the registers being allocated.</li> </ul> <p>The interpreter invokes these functions in the course of evalaution of expressions to create temporary store.</p> <h3 id=static-allocation>Static Allocation<a class=headerlink href=#static-allocation title="Permanent link">&para;</a></h3> <p>As noted previously, global variables are allocated statically. In our interpreter, the initial portion of the stack will be used for static allocation. The rest of the stack memory region will be used for run time allocation. The amount of static storage required is known from the variable declarations.</p> <h3 id=run-time-stack-allocation>Run Time Stack Allocation<a class=headerlink href=#run-time-stack-allocation title="Permanent link">&para;</a></h3> <p>During run-time, when an ExpL function is invoked, space has to be allocated for storing</p> <ul> <li>the arguments to the function,</li> <li>return value of the function,</li> <li>local variables declared in the function.</li> </ul> <p>For this, an <strong>activation record</strong> is created in the stack for each function call (and the stack grows). The activation record is also used to save the state (registers in use) of the invoking function and some control information (like the return address of the calling program in the case of a compiler).</p> <p>Each activation record has a base, and the <strong>base pointer (BP)</strong> is a variable (or a machine register in the case of a compiler) that points to the base of the current functions activation record. When one function invokes another, the base pointer value of the caller is pushed on to the stack and BP is set to point to the new activation record base. Upon return, the activation record is popped off the stack and old value of base pointer is restored. The <strong>stack pointer (SP)</strong> points to the top of the stack.</p> <p>The <strong>calling convension</strong> fixes in what order arguments to a function must be pushed by the caller to the called function, the place in the activation record where the return value is expected to be written by the callee etc. The structure of the activation record explained below will clarify the calling convension.</p> <p><img alt src=../img/data_structure_34.png></p> <p>When a function is invoked, a part of the activation record is set up by the caller and the rest is set up after invocation of the function. Similarly, when a function returns, the callee and the caller are responsible for removing the parts they have set up.</p> <p>The following sequence of actions occur when a function A calls another function B.</p> <ol> <li>A pushes its machine state (registers in use) into the stack so that the registers are free for use in B.</li> <li>A pushes to arguments to B in the order they appear in the declaration.</li> <li>A pushes one empty space in the stack for B to place its return value.</li> <li>A invokes B. (In the case of a compiler, this results in generation of a CALL instruction which results in pushing the instruction pointer into the stack and transfer of control to B).</li> </ol> <p>Inside B, the following space allocations take place:</p> <ol> <li>B saves the BP value of A to the stack and sets its own BP to the location where the BP of A is stored.</li> <li>B allocates space for local variables (in the order in which they appear in the delcaration.</li> </ol> <p>This completes the activation record for B. If B later calls another function C, then it starts saving its registers, pushes arguments to C and so on.</p> <p>When B completes execution the following sequence of actions take place:</p> <ol> <li>B pops out the local variables.</li> <li>The old BP value is popped off and saved into BP.</li> <li>B returns (in the case of a compiler, this results in generation of a RET instruction which results in setting the instruction pointer to the value saved in the stack).</li> </ol> <p>On re-entry, A does the following:</p> <ol> <li>Retrieve the return value from stack and save it to a new register. This is the result of the function call.</li> <li>Pop off the arguments.</li> <li>Restore the saved register context.</li> </ol> <p>Consider the following example:</p> <ol> <li> <p>The global variables are allocated statically in the initial portion of the stack.</p> <p><img alt src=../img/data_structure_39.png></p> </li> <li> <p>The main functions sets up stack locations for its local variables and calls the function factorial(3) after setting up a part of the callee's activation record.</p> <p><img alt src=../img/data_structure_40.png> </p> </li> <li> <p>Factorial(3) saves the old Base pointer and sets up locations for its local variables.</p> <p><img alt src=../img/data_structure_41.png></p> </li> <li> <p>Factorial(3) calls factorial(2) and the activation record of factorial(2) is setup similar to the above steps.</p> <p><img alt src=../img/data_structure_42.png></p> </li> <li> <p>Activation record for factorial(1) (called by factorial(2)) is seup similarly.</p> <p><img alt src=../img/data_structure_43.png></p> </li> <li> <p>factorial(1) calculates the result and returns it by setting the value at return value location and pops off it local variables and sets back the base pointer.</p> <p><img alt src=../img/data_structure_44.png></p> </li> <li> <p>Similarly, factorial(2) calculates the steps and pops off its activation record till the result value after setting back the old base pointer.</p> <p><img alt src=../img/data_structure_45.png></p> </li> <li> <p>Similarly, factorial(3) also calculates the result and returns it to the main function.</p> <p><img alt src=../img/data_structure_46.png></p> </li> <li> <p>Main function calculates and sets the 'result' variable.</p> <p><img alt src=../img/data_structure_47.png></p> </li> </ol> <h2 id=stack>Stack<a class=headerlink href=#stack title="Permanent link">&para;</a></h2> <p>The stack is used to store data structures called activation records that are generated during procedure calls. An <a href=#>activation record</a> is used to store the information such as value of program counter and machine registers when a function call occurs. When control returns from the function call, the activation of the calling procedure can be restarted after restoring the relevant registers and setting program counter to the point immediately after the call. Also, data of objects whose lifetime are contained in that of an activation can be allocated on the stack along with other information associated with activation.</p> <h6 id=structure_3>Structure<a class=headerlink href=#structure_3 title="Permanent link">&para;</a></h6> <p>So, for the implementation of the interpreter, we create a stack which is an array of memstruct. Memstruct has the following structure.<br> <strong>NOTE</strong> : for compiler, the stack structure and functions supported functions depends and is taken care of by the target machine.</p> <p>The type field in memstruct can take the following values</p> <ol> <li>EMPTY : Indicates no value is stored in it.</li> <li>INT : Indicates that it stores an integer value.</li> <li>STR : Indicates that it stores a string value.</li> <li>H_INDEX : Indicates that valstruct stores the (integer) index of a location in the heap.</li> <li>SIZE : Indicates that this memstruct is the first index of the allocated block for a dynamically allocated variable, and it stores the size of the block allocated for the variable.</li> </ol> <h6 id=associated-methods_4>Associated methods<a class=headerlink href=#associated-methods_4 title="Permanent link">&para;</a></h6> <ul> <li>void push(struct valstruct *v) : pushes the values in valstruct to stack accordingly.</li> <li>struct valstruct* pop() : pops a value on top of the stack as a valstruct.</li> <li>void load(struct memstruct *m, struct valstruct *v) : loads the values in stack location pointed by m to the value structure v</li> <li>void store(struct memstruct *m,struct valstruct *v) : stores the values in value structure v to the stack location pointed by m.</li> </ul> <p>NOTE : valstruct and memstruct structures have been used here to keep the fine line between a value object and a object in the memory.</p> <h3 id=heap-allocation>Heap Allocation<a class=headerlink href=#heap-allocation title="Permanent link">&para;</a></h3> <p>A storage allocation decision can be static or dynamic. A decision is dynamic if it can be decided only while the program executes. In simple terms, consider the previous example, the size of the linkedlist marks is not known at the compile time, its size is only known at the run-time when we read in the count of subjects.</p> <p>In interpreter, for heap we will be using an memstruct array of size 1024.</p> <h6 id=associated-methods_5>Associated methods<a class=headerlink href=#associated-methods_5 title="Permanent link">&para;</a></h6> <ul> <li>void intialise() : To initialise the heap with required initial values.</li> <li>int alloc(int size) : allocates continuos locations of given size and returns the starting address of allocated block.</li> <li>int free(int addr) : frees the memory block starting with the given addr are erasing the data in that block and returns a value indicating the success and failure of free operation.</li> </ul> <h6 id=allocation-algorithms>Allocation algorithms<a class=headerlink href=#allocation-algorithms title="Permanent link">&para;</a></h6> <p>The two types of allocation-deallocation algorithms we will discuss here for heap management are fixed memory and buddy memory management.</p> <h6 id=fixed-memory-allocation>Fixed Memory Allocation<a class=headerlink href=#fixed-memory-allocation title="Permanent link">&para;</a></h6> <p>In this algorithm, the chunk size allocated is fixed. Lets call the fixed size as HB_SIZE, say 8. The heap is considered here as a list of blocks of HB_SIZE.</p> <p>The first block in the list is reserved. Initially, the first index of reserved block stores the index of first free block. The first index of every free block stores the index of next available free block. The last block stores -1 in the first index. This is how it looks initially(after the call to initialise function).</p> <p><img alt="Figure : Intial Heap diagram" src=../img/data_structure_10.png></p> <p>Following is the <strong>allocation algorithm.</strong></p> <ol> <li>First index of reserved block is checked, let the value be v.</li> <li>If v is -1, return -1 indicating no free blocks are available.</li> <li>Else, allocate the free block at v, after copying the next free block index stored at v to the reserved block.Return v.</li> </ol> <p>Following is the pseudo code of the algorithm.</p> <p>Following is the <strong>deallocation algorithm.</strong></p> <ol> <li>The arguement passed : starting address of the block(say s) to be deallocated</li> <li>The block s is cleared by setting all memstructs in the block to type EMPTY.</li> <li>The value in the first index of reserved block is copied to first index of block s.</li> <li>The first index of reserved block is set with starting address of block s.</li> </ol> <h6 id=illustration_3>Illustration<a class=headerlink href=#illustration_3 title="Permanent link">&para;</a></h6> <p>This section shows how the heap looks after each step of allocation or free. This is for the better understanding of the algorithms.</p> <ul> <li> <p>x = alloc();</p> <p><img alt src=../img/data_structure_11.png></p> </li> </ul> <p>x is a memstruct in the run-time stack of type MEMSTRUCT_BIND with intval 8.</p> <ul> <li> <p>y = alloc();</p> <p><img alt src=../img/data_structure_12.png></p> </li> <li> <p>z = alloc();</p> <p><img alt src=../img/data_structure_13.png></p> </li> <li> <p>dealloc(x);</p> <p><img alt src=../img/data_structure_14.png></p> </li> <li> <p>dealloc(z);</p> <p><img alt src=../img/data_structure_15.png></p> </li> <li> <p>z = alloc();</p> <p><img alt src=../img/data_structure_16.png></p> </li> </ul> <h6 id=buddy-memory-allocation>Buddy Memory Allocation<a class=headerlink href=#buddy-memory-allocation title="Permanent link">&para;</a></h6> <p>In this technique, memory is divided into partitions to try to satisfy a memory request as suitably as possible. This technique makes use of splitting memory into halves to give a best-fit.</p> <p>Every memory block in this technique has an order, a number ranging from 0 to a specified upper limit. The size of block of order n is 2n. So the blocks are exacly twice the size of blocks of one order lower. Power-of-two block sizes makes address computation simple, because all buddies are aligned on memory address boundaries that are powers of two. When a larger block is split, it is divided into two smaller blocks, and each smaller block becomes a unique <strong>buddy</strong> to the other. A split block can only be merged with its unique buddy block, which then reforms the larger block they were split from.</p> <p>Starting off, the size of the smallest possible block is determined, i.e. the smallest memory block that can be allocated. The smallest block size is then taken as the size of an order-0 block, so that all higher orders are expressed as power-of-two multiples of this size. In our implementation, we consider the smallest memory block size to be 8. So, the memory block sizes will be 8, 16, 32, 64, and so on. In our implementation, we take the heap of size 1024.</p> <p>In our implementation, we have a heap of size 1024. The smallest block size possible in the heap is 8 (order 0). The highest block size of 2n that is free is 1024.We maintain a free list for all possible block sizes. So we have freelists for sizes 8,16,32,64,128,256,512 and 1024, i.e, we maintain eight freelists.</p> <ul> <li>We have only one block of size 1024 and so the size of freelist for 1024 is 1(20).</li> <li>In the 1024 sized heap, we have two blocks of size 512. Note that, both blocks cannot be free at the same time. If both blocks are free, they will be merged to a free block of size 1024(whose information will be maintained in the freelist for blocks of 1024 size). So at a time, maximum number of blocks that are free of size 512 is 1 ( 20).</li> <li>Similarly in case of blocks of size 256, 1024 sized heap has 4 blocks of size 256 (say a,b,c and d in their respective order).a and b are buddies of each other, of which both cannot be free at a time due to merging, so only one of them can be free. Similarly in case of c and d, only one of them can be free. 1 + 1 , 2 ( 21) is the maximum size of free list for blocks of 256.</li> <li>Similarly, there are 8 blocks of 128 in 1024 (a,b,c,d,e,f,g and h). (a,b)(c,d)(e,f)(g,h) are buddy pairs and only one of each pair can be free. So the maximum size of freelist for blocks of 128 is 4 ( 22).</li> <li>Similarly, the maximum size of freelist for blocks of sizes 64,32,16 and 8 are 8 ( 23),16( 24),32( 25) and 64( 26) respectively.</li> </ul> <p>So, the size of the complete freelist is 20 + 20 + 21 + 22 + 23 + 24 + 25 +26 = 128.</p> <p>We will maintain the freelist inside the heap, So initially we won't have the complete heap of 1024 free. So we need not require a freelist for size 1024. We will store the complete freelist in a 128 sized block. Therefore, initially we have the first 128 block(0-127) of the heap reserved for freelist maintainence. Then we have a 128 sized free block(128-255), then a 256 block(256-511) and then a free block of 512 size(512-1023). Following is the diagrammatic representation of the heap initial status.</p> <p><img alt src=../img/data_structure_17.png></p> <p>The free-list in the heap has to be initialised as above. Also, the first index of each allocated block through alloc function will store the size of allocated block. This is to figure out the size that has been allocated when the dealloc function is called for a variable, which provides only the starting address of the block that has been allocated.</p> <p>Following is the <strong>allocation algorithm</strong> : (argument : Request for a block of size 'A')</p> <ul> <li>Look for a memory slot of suitable size(i.e, the <strong>minimal 2k block</strong> that is larger or equal to that of the requested memory A + 1, a plus one as first index is used to store the size of block allocated), lets call the ceiled size as 'B'.<ol> <li>If found, the starting index of the allocated block is returned to the program after removing it from the freelist.</li> <li>If not, it tries to make a suitable memory slot by following the below steps<ol> <li>Split a the <strong>next larger suitable free memory slot</strong> into half.(Remove the next larger suitable free memory slot from it free list and add both the halves to the corresponding freelist).(Note : of there is no larger free memory slot - return -1 indicating that no free space is available).</li> <li>If the required size 'B' is reached, one of the halves is allocated to the program.</li> <li>Else go to the step a and repeat it until the memory slot of required size 'B' is found.</li> </ol> </li> </ol> </li> </ul> <p>Following is the <strong>deallocation algorithm</strong> (arguement : the starting address of the allocated block)</p> <ol> <li>Get the size, say 's' of the block from the first index of the block. Free the complete block with the help of size obtained by setting all the memstruct type to MEMSTRUCT_EMPTY.</li> <li>Check if the buddy of the block is free by checking the whether the buddy's starting address is present in the free list for blocks of size 's' .</li> <li>If the buddy is not free, add the current freed block to its free list.</li> <li>If the buddy is free, remove the buddy from the freelist and combine the two, and go back to step 2 to check for the buddy of merged block. Repeat this process until the upper limit is reached or buddy is not free.</li> </ol> <p>The psuedo code for alloc and dealloc functions is as follows :</p> <h6 id=illustration_4>Illustration<a class=headerlink href=#illustration_4 title="Permanent link">&para;</a></h6> <p>For a better understanding purpose, we will have a simple illustration of how heap memory looks like through a set of some allocations and deallocations.</p> <p>For illustration, we will have 64-sized heap and smallest block size as 8. So we free lists for sizes 8,16 and 32 of lengths 4 ,2 and 1. So we will use a 8-size block to store the free-list.</p> <ol> <li> <p>The heap looks initially as follows.</p> <p><img alt src=../img/data_structure_18.png></p> </li> <li> <p>Request for memory of size 5. Lets call this request as A. The nearest 2^k value for 5 is 8. We search for a 8 sized free block. We have one such! Allocate it!</p> <p><img alt src=../img/data_structure_19.png></p> </li> <li> <p>Next we will have a reuqest B of size 14.</p> <p><img alt src=../img/data_structure_20.png> </p> </li> <li> <p>Now we have a request C of size 7.</p> <p><img alt src=../img/data_structure_21.png></p> <p><img alt src=../img/data_structure_22.png></p> <p><img alt src=../img/data_structure_23.png></p> </li> <li> <p>Now, C releases its memory.</p> <p><img alt src=../img/data_structure_24.png></p> <p><img alt src=../img/data_structure_25.png></p> <p><img alt src=../img/data_structure_26.png></p> </li> </ol> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> <a href=https://creativecommons.org/licenses/by-nc/4.0/ rel=license> <img alt="Creative Commons License" style=border-width:0 src=https://licensebuttons.net/l/by-nc/4.0/80x15.png> </a> National Insititute of Technology, Calicut </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/silcnitc target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://groups.google.com/g/expl-users target=_blank rel=noopener title=groups.google.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 488 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.tabs", "navigation.top", "navigation.sections"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.fe8b6f2b.min.js></script> </body> </html>